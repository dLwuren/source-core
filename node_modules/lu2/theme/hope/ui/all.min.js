(async()=>{CSS.supports("overflow-anchor:auto")&&CSS.supports("offset:none")||await import("./safari-polyfill.js");class t extends HTMLButtonElement{static get observedAttributes(){return["color","height","radius","width"]}constructor(){super(),this.render()}get color(){return this.getAttribute("color")}set color(t){this.setAttribute("color",t)}get radius(){let t=this.getAttribute("radius");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set radius(t){this.setAttribute("radius",t)}get height(){let t=this.getAttribute("height");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set height(t){this.setAttribute("height",t)}get width(){let t=this.getAttribute("width");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set width(t){this.setAttribute("width",t)}renderAttribute(t,e){"string"==typeof this[t]?this.style.setProperty("--ui-button-"+t,this[t]):e||this.style.removeProperty("--ui-button-"+t)}render(){t.observedAttributes.forEach((t=>{this.renderAttribute(t,!0)}))}attributeChangedCallback(t){this.render(t)}connectedCallback(){this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-button"}})),this.isConnectedCallback=!0}}customElements.get("ui-button")||customElements.define("ui-button",t,{extends:"button"});class e extends HTMLInputElement{static get observedAttributes(){return["extends","checked","disabled"]}get extends(){return this.hasAttribute("extends")}set extends(t){this.toggleAttribute("extends",t)}render(){this.extends&&[...this.labels].forEach((t=>{t.classList[this.checked?"add":"remove"]("active"),t.classList[this.disabled?"add":"remove"]("disabled"),t.setAttribute("role","button")}))}attributeChangedCallback(){this.render()}constructor(){super(),this.addEventListener("change",(()=>{this.render()})),this.render();const t=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"checked");Object.defineProperty(e.prototype,"checked",{...t,set(e){t.set.call(this,e),this.render()}})}connectedCallback(){this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-checkbox"}})),this.isConnectedCallback=!0}}customElements.get("ui-checkbox")||customElements.define("ui-checkbox",e,{extends:"input"});const i={toString:()=>"ui-datetime"};["date","day","year","month","hour","minute","time","second"].forEach((t=>{i[t]=(...e)=>["ui",t,...e].join("-")}));const s=/-|\//g;String.prototype.toDate=function(){let t,e,i;const n=this.replace(/年|月|日/g,"-").split(s);return t=1*n[0],e=n[1]||1,i=n[2]||1,t?new Date(t,e-1,i):new Date},String.prototype.toTime=function(){let t=this.trim().split(":").map(((t,e)=>!t||/\D/.test(t)?"":t<0?"00":(0===e?t>23&&(t="23"):t>59&&(t="59"),t.padStart(2,"0")))).filter((t=>t)).slice(0,3);return 1==t.length&&t.push("00"),t},Date.prototype.toArray=function(){let t=this.getFullYear(),e=this.getMonth()+1,i=this.getDate();return e<10&&(e=`0${e}`),i<10&&(i=`0${i}`),[t,e,i]};class n extends HTMLInputElement{constructor(){super(),this.element=this.element||{};let t=document.createElement("div");t.className=i.date("container"),this.element.container=t}get min(){let t=this.getAttribute("min")||"";return t?this.minMaxConvert(t).toString():t}set min(t){t?this.setAttribute("min",this.minMaxConvert(t)):this.removeAttribute("min")}get max(){let t=this.getAttribute("max")||"";return t?this.minMaxConvert(t).toString():t}set max(t){t?this.setAttribute("max",this.minMaxConvert(t)):this.removeAttribute("max")}get step(){let t=this.getAttribute("step"),e=this.params.type,i=Number(t);return t&&/^\d+$/.test(t)?("time"==e?t>60?(t%60!=0||t/60>30)&&(i=1):i>30&&(i=1):"hour"==e?i>12&&(i=1):"minute"==e&&i>30&&(i=1),i):""}set step(t){t?this.setAttribute("step",t):this.removeAttribute("step")}minMaxConvert(t){"number"==typeof t&&Number.isInteger(t)&&(t>1e7?t=new Date(t):t<9999&&(t=String(t)));let e=[];t.toArray?e=t.toArray():"string"==typeof t&&(e=t.toDate().toArray());let i=this.getAttribute("type")||"date";if("date"==i||"date-range"==i)t=e.join("-");else if("year"==i)t=e[0];else if("month"==i||"month-range"==i)t=e.slice(0,2).join("-");else{t.toArray&&(t=t.getHours()+":"+t.getMinutes());let e=t.toTime();if(!e[0])return"";t=e.join(":")}return t}setError(){let t=this.element.container;t.toggleAttribute("is-error",t.querySelector("[disabled][selected]"))}setStatus(){let t=this.min,e=this.max;if(!t&&!e)return;let i=t.split(/\D/),s=e.split(/\D/),n=this.element.container,r="[disabled][selected]",o=this.selected,a=this.params.type;if("time"==a||"hour"==a||"minute"==a){let i=t||"00:00:00",s=e||"23:59:59",a=Number(i.split(":")[0])||0,l=Number(i.split(":")[1])||0,h=Number(i.split(":")[2])||0,d=Number(s.split(":")[0]);isNaN(d)&&(d=23);let c=Number(s.split(":")[1]),u=Number(s.split(":")[2]);isNaN(c)&&(c=59),isNaN(u)&&(u=59);let p=n.querySelector('ui-scroll-snap[list="minute"]'),m=n.querySelector('ui-scroll-snap[list="second"]');return p?(o[0]<a||o[0]>d?[...p.children].forEach((t=>{t.disabled=!0})):o[0]==a?[...p.children].forEach((t=>{let e=parseInt(t.textContent);t.disabled=e<l})):o[0]==d?[...p.children].forEach((t=>{let e=parseInt(t.textContent);t.disabled=e>c})):[...p.children].forEach((t=>{t.disabled=!1})),m?(p.querySelector(r)?[...m.children].forEach((t=>{t.disabled=!0})):o[0]==a&&Number(o[1])==Number(l)?[...m.children].forEach((t=>{t.disabled=parseInt(t.textContent)<h})):o[0]==d&&Number(o[1])==Number(c)?[...m.children].forEach((t=>{t.disabled=parseInt(t.textContent)>u})):[...m.children].forEach((t=>{t.disabled=!1})),void this.setError()):void this.setError()):void this.setError()}let l=i[0]||0,h=s[0]||9999,d=i[1]||1,c=s[1]||12,u=i[2]||1,p=s[2]||31,m=n.querySelector('[list="month"]'),g=n.querySelector('[list="day"]');m?(o[0]<l||o[1]>h?[...m.children].forEach((t=>{t.disabled=!0})):o[0]==l?[...m.children].forEach((t=>{let e=parseInt(t.textContent);t.disabled=e<d})):o[0]==h?[...m.children].forEach((t=>{let e=parseInt(t.textContent);t.disabled=e>c})):[...m.children].forEach((t=>{t.disabled=!1})),g?(m.querySelector(r)?[...g.children].forEach((t=>{t.disabled=!0})):o[0]==l&&Number(o[1])==Number(d)?[...g.children].forEach((t=>{let e=parseInt(t.textContent);t.disabled=e<u})):o[0]==h&&Number(o[1])==Number(c)?[...g.children].forEach((t=>{let e=parseInt(t.textContent);t.disabled=e>p})):[...g.children].forEach((t=>{t.disabled=!1})),this.setError()):this.setError()):this.setError()}events(){return this.addEventListener("click",(function(){let t=this.element.popup,e=this.params.type;t?t.show():(t=new Popup({content:this.element.container}),t.addEventListener("show",(()=>{this[e]&&this[e](),this.show()})),t.addEventListener("hide",(()=>{this.hide()})),this.element.popup=t)})),this}setValue(){const t=this.selected,e=this.value;switch(this.params.type){case"date":this.value=t.join("-");break;case"month":this.value=t.slice(0,2).join("-");break;case"year":this.value=t[0];break;case"time":case"minute":this.value=t.join(":");break;case"hour":this.value=`${t[0]}:${t[1]||"00"}`}return this.value!=e&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.value}getYearData(t){let e=(new Date).getFullYear();t&&t[0]&&(e=t[0]||e);let i="";for(let t=e-5;t<=e+5;t++)i+=`<ui-scroll-snap-item${t===e?" selected":""}>${t}年</ui-scroll-snap-item>`;return i}getMonthData(t){let e=0;return t&&t[1]&&(e=t[1]-1||e),Array(12).fill().map(((t,i)=>`<ui-scroll-snap-item${i===e?" selected":""}>${String(i+1).padStart(2,"0")}月</ui-scroll-snap-item>`)).join("")}getMonthDay(t){let e=t;"object"==typeof t||t.map||(e=t.toArray());const i=[31,28,31,30,31,30,31,31,30,31,30,31];return(e[0]%4==0&&e[0]%100!=0||e[0]%400==0)&&(i[1]=29),i}getDayData(t){let e=new Date;t&&(e=t.join("-").toDate());let i=e.getMonth(),s=this.getMonthDay(e)[i],n=e.getDate();return Array(s).fill().map(((t,e)=>`<ui-scroll-snap-item${e+1===n?" selected":""}>${String(e+1).padStart(2,"0")}日</ui-scroll-snap-item>`)).join("")}getHourData(t){let e=(new Date).getHours();t&&(e=Number(t[0]));let i=24;"ah:mm"==this.datetimeformat&&(i=12,e>12&&(e-=12));let s=this.min||"00:00:00",n=this.max||"23:59:59",r=Number(s.split(":")[0])||0,o=Number(n.split(":")[0]);return isNaN(o)&&(o=23),Array(i).fill().map(((t,i)=>`<ui-scroll-snap-item${i===e?" selected":""}${i<r||i>o?" disabled":""}>${String(i).padStart(2,"0")}时</ui-scroll-snap-item>`)).join("")}getMinuteData(t){let e=this.selected[0],i=this.selected[1];i||0===i||(i=(new Date).getMinutes());let s=1*this.step||1;s>60&&(s=Math.floor(s/60)),t||60!=s||(t="00");const n="<ui-scroll-snap-item></ui-scroll-snap-item>";if(void 0!==t)return`<ui-scroll-snap-item></ui-scroll-snap-item><ui-scroll-snap-item selected>${String(t).padStart(2,"0")}分</ui-scroll-snap-item>`;let r=Math.floor(60/s),o=this.min,a=this.max;(!o||o.split(":").length<2)&&(o="00:00:00"),(!a||a.split(":").length<2)&&(o="23:59:59");let l=o.split(":"),h=a.split(":"),d=Array(r).fill().map(((t,n)=>{let r=s*n,o="";return(Number(e)==Number(l[0])&&n<l[1]||Number(e)==Number(h[0])&&n>h[1])&&(o=" disabled"),`<ui-scroll-snap-item${r===i?" selected":""}${o}>${String(r).padStart(2,"0")}分</ui-scroll-snap-item>`})).join("");return r<6&&(d=n+d+n,this.element.minute&&this.element.minute.removeAttribute("loop")),d}getSecondData(){let t=this.selected[2];t||0===t||(t=(new Date).getSeconds());let e=1*this.step||1;e>60&&(e=Math.floor(e/60));const i="<ui-scroll-snap-item></ui-scroll-snap-item>";let s=Math.floor(60/e);t=Math.floor(t/e)*e;let n=Array(s).fill().map(((i,s)=>{let n=e*s;return`<ui-scroll-snap-item${n===t?" selected":""}>${String(n).padStart(2,"0")}秒</ui-scroll-snap-item>`})).join("");return s<6&&(n=i+n+i,this.element.second&&this.element.second.removeAttribute("loop")),n}getAmpmData(){let t=1;return 1*this.selected[0]<12&&(t=0),`<ui-scroll-snap-item></ui-scroll-snap-item><ui-scroll-snap-item${0===t?" selected":""}>上午</ui-scroll-snap-item><ui-scroll-snap-item${1===t?" selected":""}>下午</ui-scroll-snap-item><ui-scroll-snap-item></ui-scroll-snap-item>`}date(){return this.month(),this.day(),this}month(){this.year();let t=this.element.month,e=this.selected;if(!t){t=document.createElement("ui-scroll-snap"),t.setAttribute("type","y"),t.setAttribute("loop",""),t.setAttribute("list","month"),t.addEventListener("scrollEnd",(t=>{let i=t.detail;i.item&&(e[1]=i.item.textContent.replace(/\D/g,""),this.selected=e,this.setValue(),this.setStatus())})),t.innerHTML=this.getMonthData();let s=document.createElement("div");s.className=i.month("container"),s.append(t),this.element.year.parentElement.after(s),this.element.month=t}let s=t.querySelector(":scope > [selected]");s&&s.removeAttribute("selected"),[...t.children].some((t=>{t.textContent.replace(/\D/g,"")==String(e[1])&&(t.selected=!0,t.position())}))}day(){let t=this.element.day,e=this.element.container,s=this.selected;if(!t){t=document.createElement("ui-scroll-snap"),t.setAttribute("type","y"),t.setAttribute("loop",""),t.setAttribute("list","day"),t.addEventListener("scrollEnd",(t=>{let e=t.detail;e.item&&(s[2]=e.item.textContent.replace(/\D/g,""),this.selected=s,this.setValue(),this.setStatus())})),t.innerHTML=this.getDayData();let n=document.createElement("div");n.className=i.day("container"),n.append(t),e.append(n),this.element.day=t}let n=t.querySelector(":scope > [selected]");return n&&n.removeAttribute("selected"),[...t.children].some((t=>{t.textContent.replace(/\D/g,"")==String(s[2])&&(t.selected=!0,t.position())})),this}year(){let t=this.element.year,e=this.element.container,s=this.selected,n=this.min,r=this.max,o=n.split(/\D/)[0]||0,a=r.split(/\D/)[0]||9999;if(!t){t=document.createElement("ui-scroll-snap"),t.setAttribute("type","y"),t.setAttribute("loop",""),t.setAttribute("list","year"),t.addEventListener("scrollEnd",(t=>{let e=t.detail;e.item&&(s[0]=e.item.textContent.replace(/\D/g,""),this.selected=s,this.setValue(),this.setStatus())})),t.innerHTML=this.getYearData();let n=document.createElement("div");n.className=i.year("container"),n.append(t),t.onScrollInited=function(t,e){let i=parseInt(e[0].textContent),s=e.length;t.forEach(((t,e)=>{let n=i-s+e;t.textContent=n+"年",t.disabled=n<o||n>a}))},t.onScrollStart=function(t,e){let i=parseInt(t[0].textContent),s=e.length;t.forEach(((t,e)=>{if(e<s){let n=i-s+e;t.textContent=n+"年",t.disabled=n<o||n>a}})),e.forEach(((t,e)=>{let s=i+e;t.textContent=s+"年",t.disabled=s<o||s>a}))},t.onScrollEnd=function(t,e,i){let s=parseInt(t[t.length-1].textContent),n=e.length;[...t].reverse().forEach((function(t,e){let i=s+n-e;t.textContent=i+"年",t.disabled=i<o||i>a}))},e.prepend(n),this.element.year=t}let l=t.querySelector(":scope > [selected]");l&&l.removeAttribute("selected"),[...t.children].some((t=>{t.textContent.replace(/\D/g,"")==String(s[0])&&(t.selected=!0,t.position())}))}hour(){let t=this.element.hour,e=this.element.container,s=this.selected;if(!t){t=document.createElement("ui-scroll-snap"),t.setAttribute("type","y"),t.setAttribute("loop",""),t.setAttribute("list","hour"),t.addEventListener("scrollEnd",(t=>{let e=t.detail;if(e.item){s[0]=e.item.textContent.replace(/\D/g,"");let t=this.element.ampm,i=t&&t.querySelector("[selected]");i&&"下午"==i.textContent&&(s[0]=1*s[0]+12),this.selected=s,this.setValue(),this.setStatus()}})),t.innerHTML=this.getHourData(s);let n=document.createElement("div");n.className=i.hour("container"),n.append(t),e.append(n),this.element.hour=t}let n=t.querySelector(":scope > [selected]");return n&&n.removeAttribute("selected"),[...t.children].some((t=>{t.textContent.replace(/\D/g,"")==String(s[0])&&(t.selected=!0,t.position())})),"hour"==this.params.type&&this.minute(s[1]),this}time(){const t=this.element.container,e=this.selected;if("H:mm"!=this.datetimeformat){let s=this.element.ampm;s||(s=document.createElement("ui-scroll-snap"),s.setAttribute("type","y"),s.setAttribute("list","ampm")),s.addEventListener("scrollEnd",(t=>{let i=t.detail;i.item&&("上午"==i.item.textContent?e[0]>=12&&(e[0]-=12):e[0]<12&&(e[0]=1*e[0]+12),e[0]=String(e[0]).padStart(2,"0"),this.selected=e,this.setValue(),this.setStatus())})),s.innerHTML=this.getAmpmData();let n=document.createElement("div");n.className=i.hour("container"),n.append(s),t.prepend(n),this.element.ampm=s}this.hour().minute(),3==e.length&&this.second()}minute(t){"minute"==this.params.type&&this.hour();let e=this.element.minute,s=this.element.container,n=this.selected;if(!e){e=document.createElement("ui-scroll-snap"),e.setAttribute("type","y"),void 0===t&&e.setAttribute("loop",""),e.setAttribute("list","minute"),this.element.minute=e,e.addEventListener("scrollEnd",(t=>{let e=t.detail;e.item&&(n[1]=e.item.textContent.replace(/\D/g,""),this.selected=n,this.setValue(),this.setStatus())})),e.innerHTML=this.getMinuteData(t);let r=document.createElement("div");r.className=i.minute("container"),r.append(e),s.append(r)}let r=e.querySelector(":scope > [selected]");return r&&r.removeAttribute("selected"),[...e.children].some((t=>{if(t.textContent.replace(/\D/g,"")==String(n[1]))return t.selected=!0,t.position(),!0})),this}second(){let t=this.element.second,e=this.element.container,s=this.selected;if(!t){t=document.createElement("ui-scroll-snap"),t.setAttribute("type","y"),t.setAttribute("loop",""),t.setAttribute("list","second"),this.element.minute=t,t.addEventListener("scrollEnd",(t=>{let e=t.detail;e.item&&(s[2]=e.item.textContent.replace(/\D/g,""),this.selected=s,this.setValue(),this.setStatus())})),t.innerHTML=this.getSecondData();let n=document.createElement("div");n.className=i.second("container"),n.append(t),e.append(n)}let n=t.querySelector(":scope > [selected]");return n&&n.removeAttribute("selected"),[...t.children].some((t=>{if(t.textContent.replace(/\D/g,"")==String(s[2]))return t.selected=!0,t.position(),!0})),this}show(){return this.dispatchEvent(new CustomEvent("show",{detail:{type:"ui-datetime"}})),this}hide(){return this.display=!1,this.dispatchEvent(new CustomEvent("hide",{detail:{type:"ui-datetime"}})),this}connectedCallback(){let t=this.getAttribute("type");0==["date","year","month","time","hour","minute"].includes(t)&&(t="date",t&&this.removeAttribute("type")),this.params=this.params||{},this.params.type=t,this.setAttribute("readonly","readonly"),this.toggleAttribute("required",!0);let e=this.getAttribute("value")||this.value;switch(t){case"date":case"year":case"month":{const i=e.toDate().toArray();"date"==t?this.value=i.join("-"):"year"==t?this.value=i[0]:"month"==t&&(this.value=i.slice(0,2).join("-")),this.selected=i;break}case"time":{const i=e.toTime();let s=new Date,n=s.getHours(),r=s.getMinutes(),o=s.getSeconds(),a=String(i[0]||n).padStart(2,"0"),l=String(i[1]||r).padStart(2,"0"),h=String(i[2]||o).padStart(2,"0"),d=this.step;"time"==t&&(!d&&i[2]||d>0&&d<=30)?(this.value=[a,l,h].join(":"),this.selected=[a,l,h]):(this.value=[a,l].join(":"),this.selected=[a,l]);break}case"hour":case"minute":{const t=e.toTime();let i=new Date,s=i.getHours(),n=i.getMinutes(),r=String(t[0]||s).padStart(2,"0"),o=String(t[1]||n).padStart(2,"0");this.value=[r,o].join(":"),this.selected=[r,o];break}}if(/time/.test(t)){this.datetimeformat="H:mm";let t=document.createElement("input");if(t.setAttribute("type","time"),t.value="00:00",document.body.append(t),t.style.position="absolute",t.style.left="-999px",t.style.fontFamily="revert","time"==t.type){t.style.fontSize="20px";let e=t.clientWidth;t.style.fontSize="30px";let i=t.clientWidth-e;Math.ceil(i/10)>=5&&(this.datetimeformat="ah:mm"),t.remove()}}this.events(),this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-datetime"}})),this.isConnectedCallback=!0}}customElements.get("ui-datetime")||customElements.define("ui-datetime",n,{extends:"input"});const r=(()=>{const t="dialog",e={add:(...t)=>`ui-dialog-${t.join("-")}`,toString:e=>`ui-${e||t}`};let i=function(t){this.element={dialog:t},t.hasAttribute("role")||t.setAttribute("role","dialog"),t.show=this.show.bind(this),t.showModal=this.showModal.bind(this),t.close=this.close.bind(this),t.zIndex=this.zIndex.bind(this),Object.defineProperty(t,"open",{set:this.setOpen.bind(this),get:t.hasAttribute.bind(t,"open")})};i.prototype={get dialog(){return this.element.dialog},show(){this.setOpen(!0),this.zIndex()},showModal(){this.setOpen(!0)},close(){this.setOpen(!1),this.dialog.dispatchEvent(new CustomEvent("close",{bubbles:!1,cancelable:!1}))},setOpen(t){t?this.dialog.setAttribute("open",""):this.dialog.removeAttribute("open")},zIndex(){var t=this.dialog;const e=window.getComputedStyle(t).zIndex;let i=19;document.body.childNodes.forEach((function(e){if(1!==e.nodeType)return;const s=window.getComputedStyle(e),n=1*s.zIndex;n&&t!==e&&"none"!==s.display&&(i=Math.max(n+1,i))})),i!==e&&(t.style.zIndex=i)}};let s=function(s){if(!s.hide||!s.button){if("open"in document.createElement("dialog")==0&&new i(s),"ui-dialog"==s.getAttribute("is")){Object.defineProperties(s,{setParams:{value:function(t){return Object.assign(this.params,t||{}),this.params}},button:{value:function(){const t=this.params,e=this.element;e.footer.innerHTML="";for(const t in e)/^button/.test(t)&&delete e[t];const i=1===t.buttons.length;let s=["取消","确定"],n=1;return 2===t.buttons.length&&t.buttons[0].events&&!t.buttons[1].events&&(s=s.reverse(),n=0),t.buttons.forEach((function(t,r){let o=(t=t||{}).type,a=t.value;o||!i&&r!==n||(o="primary"),a||(a=i?"确定":s[r]);let l=document.createElement("button");if(t.for?(l=document.createElement("label"),l.setAttribute("for",t.for)):t.form&&(l.setAttribute("form",t.form),l.type="reset"==o?o:"submit"),t.className&&(l.className=t.className),l.setAttribute("is","ui-button"),l.setAttribute("blank",""),o){let t=l.hasAttribute("form")?"data-type":"type";l.setAttribute(t,o)}if(l.disabled=Boolean(t.disabled),l.innerHTML=a,r){let t=document.createElement("hr");t.setAttribute("v",""),e.footer.append(t)}e.footer.appendChild(l),e["button"+r]=l})),t.buttons.forEach(((t,i)=>{t=t||{};const s=e["button"+i];if(!s||t.for||t.form)return;let n=t.events||{click:()=>{this[this.closeMode]()}};"function"==typeof n&&(n={click:n});for(const t in n)s.addEventListener(t,(e=>{e.dialog=this,n[t](e)}))})),e.close&&void 0===t.close&&(e.close.style.display=t.buttons.length?"none":""),this}},events:{value:function(){const i=this.element;this.addEventListener("animationend",(function(i){i.target.tagName.toLowerCase()===t&&this.classList.remove(e.add("animation"))}));const s=i.close;return s&&s.addEventListener("click",(()=>{this[this.closeMode]()})),this.dispatchEvent(new CustomEvent("DOMContentLoaded")),this}},alert:{value:function(t,i){if(!t)return;let s=t;const n={title:"",type:"remind",buttons:[{}],close:!1},r={...n,...i};"fail"===r.type&&(r.type="danger"),r.buttons.length&&(r.buttons[0].type||(r.buttons[0].type=r.type,!1===/^(?:remind|primary|success|safe|warn|warning|danger|error)$/.test(r.type)&&(r.buttons[0].type=n.type)),r.buttons[0].value||(r.buttons[0].value="确定"));let o=(new DOMParser).parseFromString(s,"text/html").body.childNodes;return 1==o.length?3===o[0].nodeType&&(s='<p class="'+e.add("wrap")+'">'+s+"</p>"):s='<div class="'+e.add("wrap")+'">'+s+"</div>",s='<div class="'+e.add(r.type)+" "+e.add("alert")+'">'+s+"</div>",this.setParams({width:"auto",title:r.title,buttons:r.buttons,content:s}),this.type="alert",this.show(),this}},confirm:{value:function(t,i){if(!t)return;let s=t;const n={title:"",type:"danger",buttons:[{},{}],close:!1},r={...n,...i};"error"!==r.type&&"fail"!==r.type||(r.type="danger"),"primary"===r.type&&(r.type="remind"),2===r.buttons.length&&(r.buttons[0].events&&!r.buttons[1].events&&(r.buttons=r.buttons.reverse()),r.buttons[1].type||(r.buttons[1].type=r.type,!1===/^(?:remind|primary|success|safe|warn|warning|danger|error)$/.test(r.type)&&(r.buttons[1].type=n.type)));let o=(new DOMParser).parseFromString(s,"text/html").body.childNodes;return 1==o.length?o[0].nodeType===Node.TEXT_NODE&&(s='<p class="'+e.add("wrap")+'">'+s+"</p>"):s='<div class="'+e.add("wrap")+'">'+s+"</div>",s='<div class="'+e.add(r.type)+" "+e.add("confirm")+'">'+s+"</div>",this.setParams({width:"auto",title:r.title,buttons:r.buttons,content:s}),this.type="confirm",this.show(),this}},loading:{value:function(){const t=this.element.dialog;return this.params.content='<ui-loading rows="10" size="3"></ui-loading>',t.classList.add(e.add("loading")),setTimeout((()=>{/loading/.test(t.className)&&t.addEventListener("click",(()=>{/loading/.test(t.className)&&this.remove()}))}),1e4),this.show(),this}},content:{get(){return this.params.content},set(t){if(t!=this.params.content)return void(this.params.content=t);let i=this.element.body;if(this.element.dialog.classList.remove(e.add("loading")),"function"==typeof t)t=t();else if("string"==typeof t&&/^#?\w+(?:[-_]\w+)*$/i.test(t)){let e=document.querySelector(t);e&&(t=e.matches("textarea")?e.value:e.matches("script")?e.innerHTML:e)}if(this.closeMode="string"==typeof t?"remove":"hide","hide"==this.closeMode&&i.innerHTML){let t=document.createElement("div");t.setAttribute("hidden",""),i.childNodes.forEach((e=>{t.appendChild(e)})),document.body.appendChild(t)}if(i.innerHTML="","remove"==this.closeMode)i.innerHTML=t;else{let e=t.parentElement,s=e&&e.matches("div[hidden]");i.appendChild(t),s&&""===e.innerHTML.trim()&&e.remove(),1===t.nodeType&&"none"==getComputedStyle(t).display&&(t.removeAttribute("hidden"),t.style.display="","none"==getComputedStyle(t).display&&(t.style.display="revert"))}}},scrollbar:{value:function(){const t=document.querySelectorAll('dialog[is="ui-dialog"]'),e=[].slice.call(t).some((function(t){return"none"!==window.getComputedStyle(t).display}));document.documentElement.style.overflow="",document.body.style.borderRight="";let i=window.innerWidth-document.documentElement.clientWidth;return e&&(document.documentElement.style.overflow="hidden",document.body.style.borderRight=i+"px solid transparent"),this}},tabindex:{value:function(){var t=this.element.dialog,e=this.lastActiveElement;if(1==this.open){var i=document.activeElement;"alert"==this.type||"confirm"==this.type?(this.element.button0!=i&&(this.lastActiveElement=i),this.element.button0.focus()):t&&(t!=i&&(this.lastActiveElement=i),t.focus())}else e&&"body"!=e.tagName.toLowerCase()&&(e.focus(),e.blur(),this.lastActiveElement=null);return this}},show:{value:function(){return!0!==this.open&&this.classList.add(e.add("animation")),this.open=!0,this.zIndex&&this.zIndex(),this.element.close&&void 0!==this.params.close&&(this.element.close.style.display=this.params.close?"":"none"),this.dispatchEvent(new CustomEvent("show",{detail:{type:"ui-dialog"}})),this}},hide:{value:function(){return this.close(),this.dispatchEvent(new CustomEvent("hide",{detail:{type:"ui-dialog"}})),this}},remove:{value:function(){return this.open=!1,this.parentElement.removeChild(this),this.dispatchEvent(new CustomEvent("remove",{detail:{type:"ui-dialog"}})),this}}}),s.params=new Proxy(s.params||{},{get:(t,e)=>t[e],set(t,i,n){if(!s.element)return!1;if(t[i]=n,"title"==i&&s.element.title)s.element.title.innerHTML=n;else if("content"==i)s.content=n;else if("buttons"==i)s.button();else if(s.element.dialog&&("width"==i||"height"==i)){let t=s.element.dialog;t.classList.remove(e.add("stretch")),""!==n&&Number(n)==n?t.style[i]=n+"px":"height"==i&&"stretch"==n?t.classList.add(e.add(n)):("auto"==n&&(n=""),t.style[i]=n)}return!0}});const i=document.createElement("div");i.classList.add(e),i.setAttribute("tabindex","-1");const n=document.createElement("h4");n.classList.add(e.add("title")),n.innerHTML=s.title,s.removeAttribute("title");const r=document.createElement("button");r.textContent="关闭",r.classList.add(e.add("close"));const o=document.createElement("div");o.classList.add(e.add("body"));const a=document.createElement("div");a.classList.add(e.add("footer")),s.element=Object.assign(s.element||{},{dialog:i,close:r,title:n,body:o,footer:a});let l=[...s.childNodes];l.length&&l.forEach((t=>{o.append(t)})),i.append(r,n,o,a),s.append(i),new MutationObserver((function(t){t.forEach((t=>{let e=t.target;"attributes"==t.type&&(e.scrollbar(),e.tabindex())}))})).observe(s,{attributes:!0,attributeFilter:["open"]}),s.closeMode="hide",s.events()}s.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-dialog"}})),s.setAttribute("defined",""),s.isConnectedCallback=!0}},n=function(){document.querySelectorAll("dialog").forEach((t=>{s(t)})),new MutationObserver((function(t){t.forEach((function(t){t.addedNodes.forEach((function(t){t.matches&&t.matches("dialog")?s(t):t.querySelector&&t.querySelectorAll("dialog").forEach((t=>{s(t)}))}))}))})).observe(document.body,{childList:!0,subtree:!0})};return"loading"!=document.readyState?n():window.addEventListener("DOMContentLoaded",n),class{constructor(e={}){const i={title:"",content:"",width:"auto",height:"auto",buttons:[],onShow:function(){},onHide:function(){},onRemove:function(){},...e};i.buttons.length&&void 0===i.close&&(i.close=!1);const n=document.createElement(t);n.setAttribute("is","ui-dialog"),n.addEventListener("DOMContentLoaded",(()=>{'"{}"'!=JSON.stringify(e)&&(n.setParams({title:i.title,width:i.width,height:i.height,content:i.content,buttons:i.buttons,close:i.close}),"function"==typeof e.onShow&&n.addEventListener("show",(function(t){e.onShow.call(n,t)})),"function"==typeof e.onHide&&n.addEventListener("hide",(function(t){e.onHide.call(n,t)})),"function"==typeof e.onRemove&&n.addEventListener("remove",(function(t){e.onRemove.call(n,t)}))),n.show()}));const r=document.querySelector("body > dialog");return r?r.insertAdjacentElement("beforebegin",n):document.body.appendChild(n),s(n),n}}})();window.Dialog=r;class o extends HTMLElement{static get observedAttributes(){return["open","target"]}static get defaults(){return{eventtype:"click",position:"7-5"}}constructor(t,e,i){super(),i=i||{},this.params=this.params||{},this.params=new Proxy(this.params,{get:(t,e)=>{if(!e)return;let i=t[e=e.toLowerCase()],s=this.element.trigger;return void 0===i&&(i=s.getAttribute(e)||s.dataset[e],"width"==e&&(i=s!==this?s.dataset[e]:s.getAttribute(e)),void 0===i&&o.defaults[e]&&(i=o.defaults[e])),i},set:(t,e,i)=>(t[e.toLowerCase()]=i,!0)});let s=this.element||{};this.element=new Proxy(s,{get:(t,e)=>{if("target"==e){let i=this.getAttribute("target"),s=t[e];return!s&&i&&(s=document.getElementById(i)),s}return"trigger"==e?t[e]||this:t[e]},set:(t,e,i)=>{if("string"==typeof i&&(i=document.getElementById(i)||document.querySelector(i)),i&&"number"!=typeof i.nodeType)return!1;if(t[e]=i,"target"==e&&i){let t=i,e=t.id;e||(e=("lulu_"+Math.random()).replace("0.",""),t.id=e);let s=this.element.trigger;if(s==this)this.target!=e&&(this.target=e);else if(s){let t=s.dataset.target;t&&document.querySelector('datalist[id="'+t+'"]')?s.setAttribute("data-target2",e):s.setAttribute("data-target",e)}}return!0}}),[...arguments].forEach((function(t){"object"==typeof t&&t&&!t.tagName&&(i=t)})),t&&(this.element.trigger=t),(t=this.element.trigger)&&(e&&e!==i?this.element.target=e:!e&&t.dataset&&t.dataset.target&&(this.element.target=t.dataset.target)),this.setParams(i),this.open&&("loading"!=document.readyState?this.show():window.addEventListener("DOMContentLoaded",(()=>{this.show()}))),t!==this&&(this.addEventListener("connected",(function(){this.remove()})),t["ui-drop"]=this,document.body.append(this))}get htmlFor(){return this.getAttribute("for")}set htmlFor(t){this.setAttribute("for",t)}get target(){return this.getAttribute("target")}set target(t){this.setAttribute("target",t)}get open(){return this.hasAttribute("open")}set open(t){this.toggleAttribute("open",t)}setParams(t){let e=(t=t||{}).onShow,i=t.onHide;"function"==typeof e&&(this.addEventListener("show",(function(t){e.call(this,t)})),delete t.onShow),"function"==typeof i&&(this.addEventListener("hide",(function(t){i.call(this,t)})),delete t.onHide),Object.assign(this.params,t||{})}events(t){let e=this.element.trigger,i=this.element.target;if(!i&&!t)return;if(i&&i.matches("datalist"))return;const s=this.params;switch(s.eventType){case"null":default:break;case"click":e.isBindDropEvents&&e.isBindDropEvents===s.eventType||e.addEventListener(s.eventType,(t=>{t.preventDefault();const i=(t=>{if(!s.selector)return null;const i=t.closest(s.selector);return 0==e.contains(i)?null:i})(t.target);if(i&&(this.element.trigger=i),!s.selector||i){if("contextmenu"==s.eventType)return s.position=[t.pageX,t.pageY],void this.show();this.open?this.hide():this.show()}}))}"null"==s.eventType||e.isBindDocMouseUp||(document.addEventListener("mouseup",(t=>{let e=t&&t.target;if(!e||!this.open)return;let i=this.element.trigger,s=this.element.target;0!=i.contains(e)||s&&0!=s.contains(e)||this.hide()})),e.isBindDocMouseUp=!0),e.isBindDropEvents=s.eventType||!0,window.addEventListener("resize",(()=>{this.position()})),this.dispatchEvent(new CustomEvent("DOMContentLoaded")),e!=this&&e.dispatchEvent(new CustomEvent("DOMContentLoaded"))}position(){let t=this.element.trigger,e=this.element.target;return this.open&&e&&"none"!=window.getComputedStyle(t).display&&t.follow(e,{offsets:this.params.offsets,position:this.params.position,edgeAdjust:this.params.edgeAdjust}),this}show(){let t=this.element.trigger,e=this.element.target;return e&&0==document.body.contains(e)&&document.body.appendChild(e),e&&(e.style.position="absolute",e.style.display="inline",e.style.outline="none",e.tabIndex=-1,e.focus({preventScroll:!0}),e.element=e.element||{},e.element.trigger=this),t.setAttribute("aria-expanded","true"),this.open||(this.open=!0),this.position(),this.dispatchEvent(new CustomEvent("show")),t!=this&&t.dispatchEvent(new CustomEvent("show",{detail:{type:"ui-drop"}})),this}hide(){let t=this.element.trigger,e=this.element.target;return e&&(e.style.display="none",e.classList.remove("ESC"),e.element&&delete e.element.trigger),t.setAttribute("aria-expanded","false"),window.isKeyEvent&&t.focus(),this.open&&(this.open=!1),this.dispatchEvent(new CustomEvent("hide")),t!=this&&t.dispatchEvent(new CustomEvent("hide",{detail:{type:"ui-drop"}})),this}connectedCallback(){let t=this.element.target,e=this.element.trigger;e.open?e.setAttribute("aria-expanded","true"):e.setAttribute("aria-expanded","false"),t?t.matches("datalist")?setTimeout((()=>{this.list&&this.list(t)}),1):this.events():this.events(e===this),this.querySelector("a, button")||this.closest("a, button")||(this.tabIndex=0,this.role="button"),this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-drop"}})),e!=this&&e.hasAttribute("is-drop")&&(e.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-drop"}})),e.setAttribute("defined","")),this.isConnectedCallback=!0}attributeChangedCallback(t,e,i){if("target"==t){let t=document.getElementById(i);t&&(this.element.target=t)}else if("open"==t){let t=this.element.trigger.getAttribute("aria-expanded");this.open&&"false"==t?this.show():this.open||"true"!=t||this.hide()}}}window.Drop=o,customElements.get("ui-drop")||customElements.define("ui-drop",o),HTMLElement.prototype.drop=function(t,e){return this.matches("ui-drop, [is-drop]")||this["ui-drop"]||(this["ui-drop"]=new o(this,t,e)),this};const a=t=>{(t||document.querySelectorAll("[is-drop]")).forEach((t=>{let e=t.getAttribute("is-drop");e&&!t.dataset.target&&(t.dataset.target=e),e=t.dataset.target;let i=e&&document.getElementById(e);i&&(t["ui-drop"]=new o(t,i))}))},l=()=>{a();new MutationObserver((t=>{t.forEach((t=>{t.addedNodes&&t.addedNodes.forEach((t=>{t.tagName&&(t.hasAttribute("is-drop")?a([t]):a(t.querySelectorAll("[is-drop]")))}))}))})).observe(document.body,{childList:!0,subtree:!0})};"loading"!=document.readyState?l():window.addEventListener("DOMContentLoaded",l),o.prototype.list=function(t,e,i){const s=function(t){let e={id:t.id||t.value,value:t.innerHTML||t.value,className:t.className,disabled:t.disabled,label:t.label,accessKey:t.accessKey},i=t.closest("optgroup");return i&&i.disabled&&(e.disabled=!0),t.hasAttribute("href")&&(e.href=t.getAttribute("href")),e};if([...arguments].forEach((n=>{const r=typeof n;"string"===r?t=document.getElementById(n)||document.querySelector(n):"function"===r?e=n:"object"===r&&("number"==typeof n.nodeType?n.matches("datalist")?(e=function(){let t=n.querySelectorAll("optgroup"),e=!!n.querySelector("optgroup[label]");if(t.length){let i=[];return t.forEach((t=>{e?i.push({id:"-1",value:t.label,disabled:t.disabled,className:t.className,heading:!0}):i.push({}),t.querySelectorAll("option").forEach((t=>{i.push(s(t))}))})),i}return[...n.querySelectorAll("option")].map(((t,e)=>{let i=s(t);return i.value?(i.id||(i.id=e),i):{}}))},t==n&&(t=null)):t=n:n.map?e=n:i=n)})),t&&"number"!=typeof t.nodeType&&(t=null),!(t=t||this.element.trigger))return this;e||(e=[]);const n={eventType:"click",offsets:{x:0,y:0},position:"4-1",selector:"",width:"",onShow:()=>{},onHide:()=>{},onSelect:()=>{}},r={};i=i||{},Object.keys(n).forEach((t=>{r[t]=i[t]||this.params[t]||n[t]}));const o="selected",a="disabled",l={add:function(){return["ui-droplist"].concat([].slice.call(arguments)).join("-")},toString:()=>"ui-droplist"};let h="innerHTML";t.matches("input")&&(h="value");let d=document.createElement("div");d.setAttribute("role","listbox"),d.setAttribute("tabindex","-1"),/^\d+$/.test(r.width)?d.style.width=r.width+"px":d.style.width=r.width,d.className=l.add("x"),this.data=e;let c=e,u=e=>{let i="-1",s=!1,n=(e,r)=>{e&&e.length&&e.forEach(((e,l)=>{const d=r.concat(l);e&&e.data?n(e.data,d):(e&&e[o]&&!e[a]&&e.value&&(t[h]=e.value,i=d.join("-")),e&&e[o]&&(s=!0))}))};n(e,[]);const r=(t[h]||"").trim();return 0==s&&r&&(n=(t,e)=>{t&&t.length&&t.forEach(((t,s)=>{const a=e.concat(s);t&&t.data?n(t.data,a):"string"==typeof t.value&&t.value.trim()==r&&(i=a.join("-"),t[o]=!0)}))},n(e,[])),i},p=-1;"function"!=typeof e&&e.length&&e.map&&(p=u(c));const m=(t,e)=>{"function"==typeof e&&(e=e(),p=u(e));let i=(e=e&&e.length?e.map((t=>"string"==typeof t&&"-"!==t?{value:t}:t)):[{value:"没有数据",disabled:!0}]).some((t=>t&&t[o]));t.innerHTML=(()=>{let t="";const s=(t,e)=>{let n="";return t.forEach(((t,r)=>{if("-"==t||null===t||"{}"==JSON.stringify(t))return void(n+='<hr class="'+l.add("hr")+'">');const h=e.concat(r);let d=t.href;"string"!=typeof d?d="javascript:":d||(d=location.href.split("#")[0]);let c="";t.target&&(c=' target="'+t.target+'"');let u="";t.data&&(u=" data-sublist");let m="";t.label&&(m=' aria-label="'+t.label+'"');let g="";t.accessKey&&(g=` accesskey="${t.accessKey}"`),0==i&&p==h.join("-")&&(t[o]=!0);let b=l.add("li")+" "+t.className;if(t[o]&&(b=b+" "+o),b=b.trim(),1==t.heading)return t.disabled&&(b+=" disabled"),void(n+='<div class="'+b+'"'+m+' role="heading">'+t.value+"</div>");1!=t[a]?(n+='<a href="'+d+'"'+c+m+g+' class="'+b+'" data-index="'+h.join("-")+'" role="option" aria-selected="'+(t[o]||"false")+'" '+u+">"+t.value+"</a>",t.data&&(n+='<div class="'+l.add("xx")+'"><div class="'+l.add("x")+'" role="listbox">'+s(t.data,h)+"</div></div>")):n+='<span class="'+b+'"'+m+g+">"+t.value+"</span>"})),n};return t+=s(e,[]),t})(),t.listData=e};return this.setParams({eventType:r.eventType,offsets:r.offsets,selector:r.selector,position:r.position,onShow:function(){m.call(this,d,this.data),r.onShow.apply(this,arguments)},onHide:r.onHide}),this.element.trigger=t,this.element.target=d,this.events(),d.addEventListener("click",(e=>{if(1!=e.target.nodeType||!e.target.closest)return;const i=e.target.closest("a");if(!i)return;const s=d.listData,n=i.getAttribute("data-index");if(!n)return;let a=null;if(n.split("-").forEach((t=>{a=null===a?s[t]:a.data?a.data[t]:a[t]})),a){if("string"==typeof i.getAttribute("data-sublist")){i.classList.add(o);const t=i.nextElementSibling.querySelector("."+l.add("x"));if(!t)return;t.style.transform="",t.classList.remove("reverse");const e=t.getBoundingClientRect();e.right>document.documentElement.clientWidth&&t.classList.add("reverse");let s=0;return e.bottom>window.innerHeight&&(s=window.innerHeight-e.bottom),void(t.style.transform="translateY("+s+"px)")}if(n!=p){let t=null;"-1"!=p&&(p.split("-").forEach((e=>{t=null===t?s[e]:t.data?t.data[e]:t[e]})),t&&delete t[o]),a[o]=!0,p=n}(this.params.onSelect||r.onSelect).call(this,a,i),this.dispatchEvent(new CustomEvent("select",{detail:{data:a,target:i}})),t!=this&&t.dispatchEvent(new CustomEvent("select",{detail:{type:"ui-drop",data:a,target:i}})),"contextmenu"==r.eventType||""!=r.selector||a.href||(t[h]=a.value),this.hide()}})),d.addEventListener("mouseover",(t=>{if(1!=t.target.nodeType||!t.target.closest)return;const e=t.target.closest("a");if(!e)return;const i=e.parentElement.querySelector("."+o+"[data-sublist]");i&&i!=e&&i.classList.remove(o),0==e.classList.contains(o)&&"string"==typeof e.getAttribute("data-sublist")&&e.click()})),this};class h{static allHide(t){h.collectionErrorTip.forEach((e=>{t!=e&&e.hide()}))}constructor(t,e,i){const s={unique:!0,onShow:()=>{},onHide:()=>{},...i};let n=e;if("function"==typeof n&&(n=n()),"string"!=typeof n)return this;const r=t;let o,a=r.data&&r.data.errorTip;if(a)return a.content=n,a.callback={show:s.onShow,hide:s.onHide},a.element.tips.trigger=r,a.show(),this;let l=h.collectionErrorTip;const d=l[l.length-1];o=1==s.unique&&d?d.element.tips:0==s.unique&&r.data&&r.data.errorTip?r.data.errorTip.element.tips:this.create(),1==s.unique&&0==l.includes(this)&&l.push(this),o.trigger=r,this.element={trigger:r,tips:o},this.callback={show:s.onShow,hide:s.onHide},this.params={unique:s.unique},this.content=n,r.data||(r.data={}),r.data.errorTip=this,this.show()}create(){let t=document.createElement("div");return t.className="ui-tips-x ui-tips-error",document.body.appendChild(t),this.events(t),t}events(t){document.addEventListener("keydown",(t=>{/Control|Shift/i.test(t.code)||(h.allHide(this),this.hide())})),document.addEventListener("mousedown",(e=>{const i=document.activeElement,s=t.trigger,n=e.target;i&&s&&i==n&&i==s&&!s.getAttribute("data-focus")||(h.allHide(this),this.hide())})),window.addEventListener("resize",(()=>{h.allHide(this),this.hide()}))}show(){const t=this.element,e=t.tips,i=t.trigger;e.innerHTML=this.content,e.style.display="",i.follow(e,{position:"5-7",edgeAdjust:!1}),i.setAttribute("aria-label","错误提示："+this.content),i.toggleAttribute("is-error",!0),i.classList.add("valided"),this.display=!0,this.callback&&this.callback.show&&this.callback.show.call(this,i,e),i.dispatchEvent(new CustomEvent("show",{detail:{type:"ui-errortip",content:this.content}}))}hide(){if(!this.display)return;const t=this.element.tips,e=this.element.trigger;e.removeAttribute("aria-label"),e.removeAttribute("is-error"),t.style.display="none",this.display=!1,this.callback&&this.callback.hide&&this.callback.hide.call(this,e,t),e.dispatchEvent(new CustomEvent("hide",{detail:{type:"ui-errortip"}}))}}h.collectionErrorTip=[],window.ErrorTip=h,HTMLElement.prototype.errorTip=function(t,e={}){return new h(this,t,e),this},HTMLElement.prototype.follow=function(t,e){let i={offsets:{x:0,y:0},safeArea:[0,0,0,0],position:"4-1",edgeAdjust:!0};for(var s in t&&"[object Object]"===Object.prototype.toString.call(t)&&(e=t,t=null),e||(e={}))void 0===e[s]&&delete e[s];let n=Object.assign({},i,e);if(!t){let e=this.getAttribute("is-follow")||this.dataset.target;if(!e)return;if(!(t=document.getElementById(e)||document.querySelector("."+e)||document.querySelector(e)))return}let r=["4-1","1-4","5-7","2-3","2-1","6-8","3-4","4-3","8-6","1-2","7-5","3-2"],o=this.dataset.offsets,a=[];n.offsets.map&&n.offsets.length?a=n.offsets:"string"==typeof n.offsets&&(a=n.offsets.trim().split(/,\s*|\s+/)),o&&!e.offsets&&(a=o.trim().split(/,\s*|\s+/)),a.length&&(n.offsets={},n.offsets.x=a[0],n.offsets.y=a[1]||a[0]);let l=this.dataset.offsetX,h=this.dataset.offsetY;l&&(n.offsets.x=l),h&&(n.offsets.y=h),n.offsets.x*=1,n.offsets.y*=1;let d=this.dataset.position,c=this.dataset.align,u=r.some((t=>t===c));!d&&c&&u&&(d=c),!d||e&&e.position||(n.position=d);let p=this.dataset.edgeAdjust||n.edgeAdjust,m=!("0"===p||"none"===p||"false"===p||!1===p);"string"==typeof p&&"boolean"!=typeof n.edgeAdjust&&(n.edgeAdjust=m);let g=t.style.position;"absolute"!=g&&(t.style.position="absolute");let b=this.getBoundingClientRect(),f=t.getBoundingClientRect();if(f.width*f.height==0)return t.style.position=g||"",void window.console.warn((t.id?"id为"+t.id+"的":"")+"目前元素尺寸为0，无法定位");let y=window.pageYOffset,v=window.pageXOffset,E=window.innerWidth,A=window.innerHeight;(b.left<0&&b.right<0||b.top<0&&b.bottom<0||b.left>E&&b.right>E||b.top>A&&b.bottom>A)&&(n.edgeAdjust=m=!1);let w=t.offsetParent,x=w.getBoundingClientRect();const C={follow:t};this.element=this.element?Object.assign(this.element,C):C,this.params=this.params?Object.assign(this.params,n):n;let L=n.offsets,S=x.top+y,M=x.left+v;w===document.body&&"static"===window.getComputedStyle(w).position&&(S=0,M=0);let N,T,k=n.position,P=function(){let e=window.getComputedStyle(t),i=Number(e.zIndex),s=19;w.childNodes.forEach((e=>{if(1!==e.nodeType)return;let i=window.getComputedStyle(e),n=1*i.zIndex;n&&t!==e&&"none"!==i.display&&(s=Math.max(n+1,s))})),s!==i&&(t.style.zIndex=s)};if("string"!=typeof k&&2===k.length){let e=k;return N=e[0]+L.x,T=e[1]+L.y,!0===n.edgeAdjust&&(N+f.width>E+v&&(N=E+v-f.width-L.x),T+f.height>A+y&&(T=A+y-f.height-L.y)),t.style.left=`${N}px`,t.style.top=`${T}px`,t.dataset.align="3-1",void P()}!1===r.some((t=>t===k))&&(k=i.position);let H=this.dataset.safeArea||getComputedStyle(t).getPropertyValue("--safe-area")||n.safeArea;"string"==typeof H&&(H=H.trim().split(/(?:,\s*|\s+)/)),H=H.map((function(t){return parseFloat(t)||0})),1==H.length?H=H.concat(H[0],H[0],H[0]):2==H.length?(H.push(H[0]),H.push(H[1])):3==H.length&&H.push(H[1]);const I=f.width+L.x+H[3]>b.left,O=b.top-(f.height+L.y+H[0])<0,j=b.right+f.width+L.x+H[1]>E,$=b.bottom+f.height+L.y+H[2]>A;f.width,L.x,H[3],b.right,b.left,f.width,L.x,H[1],f.height,L.y,H[0],b.bottom,b.top,f.height,L.y,H[2];let q="bottom";var D=()=>{switch(k){case"1-4":case"5-7":case"2-3":T=b.top-f.height,N="1-4"===k?b.left:"5-7"===k?b.left-(f.width-b.width)/2:b.left-(f.width-b.width),q="top",m&&O&&($?I&&j||(k={"1-4":"2-1","5-7":"6-8","2-3":"3-4"}[k],D()):(k={"1-4":"4-1","5-7":"7-5","2-3":"3-2"}[k],D()));break;case"2-1":case"6-8":case"3-4":N=b.right,T="2-1"===k?b.top:"6-8"===k?b.top-(f.height-b.height)/2:b.top-(f.height-b.height),q="right",m&&j&&(I?O&&$||(k={"2-1":"1-4","6-8":"5-7","3-4":"2-3"}[k],D()):(k={"2-1":"1-2","6-8":"8-6","3-4":"4-3"}[k],D()));break;case"4-1":case"7-5":case"3-2":T=b.bottom,N="4-1"===k?b.left:"7-5"===k?b.left-(f.width-b.width)/2:b.left-(f.width-b.width),q="bottom",m&&$&&(O?I&&j||(k={"4-1":"2-1","7-5":"6-8","3-2":"3-4"}[k],D()):(k={"4-1":"1-4","7-5":"5-7","3-2":"2-3"}[k],D()));break;case"1-2":case"8-6":case"4-3":N=b.left-f.width,T="1-2"===k?b.top:"8-6"===k?b.top-(f.height-b.height)/2:b.top-(f.height-b.height),q="left",m&&I&&(j?O&&$||(k={"1-2":"1-4","8-6":"5-7","4-3":"2-3"}[k],D()):(k={"1-2":"2-1","8-6":"6-8","4-3":"3-4"}[k],D()))}};D(),N=N+L.x-M,T=T+L.y-S,m&&("top"==q?T-=H[2]:"bottom"==q?T+=H[0]:"left"==q?N-=H[1]:N+=H[3]),T+=y,N+=v,t.style.left=`${Math.round(N)}px`,t.style.top=`${Math.round(T)}px`,f=t.getBoundingClientRect(),m&&("top"==q||"bottom"==q?f.left<H[3]?N+=H[3]-f.left:f.right+H[1]>E&&(N-=f.right+H[1]-E):f.top<H[0]?T+=H[0]-f.top:f.bottom+H[2]>A&&(T-=f.bottom+H[2]-A),t.style.left=`${Math.round(N)}px`,t.style.top=`${Math.round(T)}px`),t.dataset.align=k,t.dataset.direction=q,P(),t.zIndex||(t.zIndex=P)},[NodeList.prototype,HTMLCollection.prototype].forEach((t=>{t.follow=function(){[...this].forEach((t=>{1===t.nodeType&&t.follow.apply(t,this.arguments)}))}}));class d extends HTMLElement{static get observedAttributes(){return["open"]}constructor(){super(),arguments.length&&d.custom.apply(this,arguments)}get type(){return this.getAttribute("type")}get time(){let t=this.getAttribute("time");return isNaN(t)||isNaN(parseFloat(t))?3e3:Number(t)}set type(t){this.setAttribute("type",t)}set time(t){this.setAttribute("time",t)}get open(){return this.hasAttribute("open")}set open(t){this.toggleAttribute("open",t)}connectedCallback(){this.closeMode||(this.closeMode="hide"),this.addEventListener("click",(()=>{this[this.closeMode]()})),this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-float"}})),this.isConnectedCallback=!0}attributeChangedCallback(t,e,i){"open"==t&&typeof e!=typeof i&&"string"==typeof i&&(clearTimeout(this.timer),this.time&&(this.timer=setTimeout((()=>{this[this.closeMode](),this.position()}),this.time)),this.setAttribute("data-tid",this.timer),this.zIndex(),this.position())}zIndex(){var t=19;this.parentElement&&[...this.parentElement.childNodes].forEach((function(e){if(1==e.nodeType){var i=window.getComputedStyle(e),s=1*i.zIndex;s&&"none"!=i.display&&(t=Math.max(s+1,t))}})),this.style.zIndex=t}position(){}static custom(t="",e,i){if(!this.matches||!this.matches("ui-float"))return d.custom.apply(document.createElement("ui-float"),arguments);if("object"==typeof t&&(e=t,t=""),"string"!=typeof t)return this;if(this.closeMode="remove",e&&"object"==typeof e)d.custom.call(this,t,e.type,e.time);else{if("number"!=typeof e)return(i||0===i)&&(this.time=i),e&&(this.type=e),this.innerHTML=t,this.parentElement||(document.body.appendChild(this),this.dispatchEvent(new CustomEvent("DOMContentLoaded"))),this.show(),this;d.custom.call(this,t,i,e)}}remove(){this.parentElement&&this.parentElement.removeChild(this),this.open=!1}show(){this.time>0&&(this.open=!0)}hide(){this.open=!1}}customElements.get("ui-float")||customElements.define("ui-float",d),window.UiFloat=d,window.FollowText=function(t,e,i){const s=document.createElement("ui-float");var n,r;[e,i].forEach((function(t){"string"==typeof t?n=t:"object"==typeof t&&(r=t)})),r||(r={x:-100,y:-100}),n=[n||r.type||"","text"].join(" ");var o=r.pageX||r.x,a=r.pageY||r.y;return"number"!=typeof o&&(o=window.innerWidth/2),"number"!=typeof a&&(a=window.pageYOffset+window.innerHeight/2),s.innerHTML=t||"",s.type=n,s.open=!0,document.body.append(s),s.addEventListener("animationend",(function(){document.body.removeChild(s)})),s.style.left=o-s.clientWidth/2+"px",s.style.top=a-s.clientHeight+"px",s},FollowText.success=function(t,e){return this.custom(t,"success",e)},FollowText.error=function(t,e){return this.custom(t,"error",e)},FollowText.warning=function(t,e){return this.custom(t,"warning",e)},FollowText.custom=function(){return FollowText(...arguments)};class c extends HTMLFormElement{constructor(){return super(),this.element=this.element||{},this.params=this.params||{},this.callback=this.callback||{},Object.defineProperty(this.params,"validate",{set(t){this.validate&&this.validate.setCustomValidity(t)}}),this}ajax(){let t=this.callback;t=t||function(){},"function"==typeof t&&(t={success:t});let e=null,i=this.element.submit;e=i.id&&document.querySelector("label[for="+i.id+"]"),e||(e=i),this.element.button=e;let s=this.action.split("#")[0]||location.href.split("#")[0],n=this.method||"POST",r=this.enctype;e.loading=!0,i.setAttribute("disabled","disabled");let o=new FormData(this);this.params.data&&Object.keys(this.params.data).forEach((t=>{o.append(t,this.params.data[t])}));let a=new URLSearchParams(o).toString();"get"==n.toLowerCase()&&(s=s.split("?").length>1?s+"&"+a:s+"?"+a);let l=new XMLHttpRequest;l.open(n,s),t.beforeSend&&t.beforeSend.call(this,l,o),l.onload=()=>{let e={};try{e=JSON.parse(l.responseText)}catch(e){return new LightTip("返回数据解析出错。","error"),t.error&&t.error.call(this,e),void this.dispatchEvent(new CustomEvent("error",{detail:{data:{code:-1,msg:"解析出错"}}}))}!e||0!==e.code&&0!==e.error?(new LightTip(e&&e.msg||"返回数据格式不符合要求。","error"),t.error&&t.error.call(this,e),this.dispatchEvent(new CustomEvent("error",{detail:{data:e}}))):(t.success?t.success.call(this,e):(new LightTip(e.msg||"操作成功。","success"),this.reset()),this.dispatchEvent(new CustomEvent("success",{detail:{data:e}})))},l.onerror=()=>{new LightTip("网络异常，刚才的操作没有成功，您可以稍后重试。","error"),t.error&&t.error.apply(this,arguments),this.dispatchEvent(new CustomEvent("error",{detail:{code:-1,msg:"网络异常"}}))},l.onloadend=()=>{e.loading=!1,i.removeAttribute("disabled"),t.complete&&t.complete.apply(this,arguments),this.dispatchEvent(new CustomEvent("complete"))},r&&"application/x-www-form-urlencoded"===r.toLowerCase()?l.send(a):l.send(o)}connectedCallback(){let t=[...this.elements].filter((function(t){return t.type&&/^(?:submit|image)$/i.test(t.type)}))[0]||this.querySelector("button:nth-last-of-type(1)");t||(t=(()=>{let t=document.createElement("button");return t.type="submit",t.setAttribute("hidden",""),this.appendChild(t),t})()),this.element.submit=t,this.validate=new q(this,(()=>{let t=this.params.avoidSend||this.callback.avoidSend;t&&t(this)||this.ajax()}),this.params.validate||{}),this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-form"}})),this.isConnectedCallback=!0,this.dispatchEvent(new CustomEvent("DOMContentLoaded"))}}customElements.get("ui-form")||customElements.define("ui-form",c,{extends:"form"});class u extends HTMLInputElement{static get observedAttributes(){return["height","radius","width","label","font","minLength","maxLength"]}get label(){return this.getAttribute("label")}set label(t){this.setAttribute("label",t),this.setAttribute("aria-label",t),this.placeholder||(this.placeholder=t)}get radius(){let t=this.getAttribute("radius");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set radius(t){this.setAttribute("radius",t)}get height(){let t=this.getAttribute("height");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set height(t){this.setAttribute("height",t)}get width(){let t=this.getAttribute("width");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set width(t){this.setAttribute("width",t)}setLabel(){this.style.setProperty("--ui-"+this.tagName.toLowerCase()+"-image-label",`url("data:image/svg+xml,%3Csvg width='500' height='20' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='0%25' y='50%25' font-size='16' font-family='system-ui, sans-serif' fill='${encodeURIComponent(getComputedStyle(this).getPropertyValue("--ui-fill"))}' dominant-baseline='central'%3E${this.label}%3C/text%3E%3C/svg%3E")`),this.placeholder||(this.placeholder=this.label)}count(){let t=this.minLength,e=this.maxLength;t<=0&&(t=0),e<=0?e=this._maxLength||0:(this._maxLength=e,this.removeAttribute("maxlength"));let i=this.tagName.toLowerCase();if(!e&&!t)return this.removeAttribute("_maxlength"),void this.style.removeProperty(`--ui-${i}-image-count`);this.setAttribute("_maxlength",e);let s=(t||"0")+"-"+e;e?t||(s=e):s=t+"-?";let n=this.value.trim().length,r=encodeURIComponent(getComputedStyle(this).getPropertyValue("--ui-gray")),o=r;(t&&n<t||e&&n>e)&&(o=encodeURIComponent(getComputedStyle(this).getPropertyValue("--ui-red"))),this.style.setProperty("--ui-"+i+"-image-count",`url("data:image/svg+xml,%3Csvg width='500' height='20' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='100%25' y='14' font-size='12' text-anchor='end' font-family='system-ui, sans-serif' fill='${r}'%3E%3Ctspan fill='${o}'%3E${n}%3C/tspan%3E%3Ctspan%3E/${s}%3C/tspan%3E%3C/text%3E%3C/svg%3E")`),this.style.setProperty("--ui-char-numbers",String(n).length+1+String(s).length)}renderAttribute(t,e){if(!t)return;if(/length$/i.test(t)&&this[t])return void this.count();let i=this.tagName.toLowerCase();!this.hasAttribute(t)||"string"!=typeof this[t]&&"number"!=typeof this[t]?e||this.style.removeProperty("--ui-"+i+"-"+t):"label"==t?this.setLabel():this.style.setProperty("--ui-"+i+"-"+t,this[t])}render(){u.observedAttributes.forEach((t=>{this.renderAttribute(t,!0)}))}attributeChangedCallback(t){this.renderAttribute(t)}constructor(){super(),this.render(),this.addEventListener("focus",(function(){this.label&&setTimeout((()=>{this.setLabel()}),16)})),this.addEventListener("blur",(function(){this.label&&setTimeout((()=>{this.setLabel()}),16)})),this.addEventListener("input",(()=>{this.count()}))}connectedCallback(){this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-input"}})),this.isConnectedCallback=!0}}customElements.get("ui-input")||customElements.define("ui-input",u,{extends:"input"}),window.UiInput=u;class p extends HTMLElement{static get observedAttributes(){return["gap"]}constructor(){super()}get gap(){return this.getAttribute("gap")||"0"}set gap(t){this.setAttribute("gap",t)}render(t){t?"string"==typeof t&&(t=[t]):t=p.observedAttributes,t.forEach&&t.forEach((t=>{let e=this[t];isNaN(e)||isNaN(parseFloat(e))||(e+="rem"),this.style.setProperty("--ui-"+t,e)}))}attributeChangedCallback(t){this.render(t)}connectedCallback(){this.render()}}customElements.get("ui-flex")||customElements.define("ui-flex",p);class m extends HTMLElement{static get observedAttributes(){return["gap","size","space"]}constructor(){super()}get gap(){return this.getAttribute("gap")||"0"}set gap(t){this.setAttribute("gap",t)}get size(){return this.getAttribute("size")||"6"}set size(t){this.setAttribute("size",t)}get space(){return this.getAttribute("space")||"0"}set space(t){this.setAttribute("space",t)}render(t){t?"string"==typeof t&&(t=[t]):t=m.observedAttributes,t.forEach&&t.forEach((t=>{let e=this[t];isNaN(e)||isNaN(parseFloat(e))||(e+="rem"),"size"==t&&this.hasAttribute("repeat")?this.style.setProperty("--ui-repeat-size",e):this.style.setProperty("--ui-"+t,e)}))}attributeChangedCallback(t){this.render(t)}}customElements.get("ui-grid")||customElements.define("ui-grid",m);class g extends HTMLElement{static get observedAttributes(){return["value","checked","name","disabled","type","space"]}constructor(){super();let t=this.type;if(!t)return this;let e=this.querySelector(`:scope > [type="${t}"]`);e||(e=document.createElement("input"),"string"==typeof this.name&&(e.name=this.name),"string"==typeof this.value&&(e.value=this.value),e.type=t,e.checked=this.checked,e.disabled=this.disabled,e.addEventListener("change",(()=>{this.dispatchEvent(new CustomEvent("change"))})),this.insertAdjacentElement("beforeend",e))}get type(){return this.getAttribute("type")}set type(t){this.setAttribute("type",t)}get name(){return this.getAttribute("name")}get value(){let t=this.type,e=t&&this.querySelector(`:scope > [type="${t}"]`);return e?e.value:this.getAttribute("value")}set value(t){let e=this.type,i=e&&this.querySelector(`:scope > [type="${e}"]`);i&&(i.value=t),this.setAttribute("value",t)}set name(t){let e=this.type,i=e&&this.querySelector(`:scope > [type="${e}"]`);i&&(i.name=t),this.setAttribute("name",t)}get checked(){let t=this.type,e=t&&this.querySelector(`:scope > [type="${t}"]`);return e?e.checked:this.hasAttribute("checked")}set checked(t){let e=this.type,i=e&&this.querySelector(`:scope > [type="${e}"]`);i&&(i.checked=t),this.toggleAttribute("checked",t)}get disabled(){let t=this.type,e=t&&this.querySelector(`:scope > [type="${t}"]`);return e?e.disabled:this.hasAttribute("disabled")}set disabled(t){let e=this.type,i=e&&this.querySelector(`:scope > [type="${e}"]`);i&&(i.disabled=t),this.toggleAttribute("disabled",t)}get space(){let t=this.getAttribute("space");return""===t&&(t=".75rem 1rem"),t||"0"}set space(t){this.setAttribute("space",t)}render(t){if("space"==t){let e=this.space;e?(isNaN(e)||isNaN(parseFloat(e))||(e+="rem"),this.style.setProperty("--ui-"+t,e)):this.style.removeProperty("--ui-"+t)}}attributeChangedCallback(t){this.render(t)}connectedCallback(){this.render("space")}}customElements.get("ui-list-item")||customElements.define("ui-list-item",g);class b extends d{position(){var t=[...document.querySelectorAll("ui-lighttip[open]")].sort((function(t,e){return(t.getAttribute("data-tid")||0)-(e.getAttribute("data-tid")||0)})),e={},i=-1;t.forEach((t=>{let s=t.textContent;void 0===e[s]&&(i++,e[s]=i),t.style.setProperty("--ui-sort-index",e[s])}))}static success(t,e=3e3){return this.custom(t,"success",e)}static error(t,e=3e3){return this.custom(t,"error",e)}static normal(t,e=3e3){return this.custom(t,"normal",e)}static custom(t,e,i){return new window.LightTip(t,e,i)}}window.LightTip=function(t,e,i){if(!t)return;var s,n;[e,i].forEach((function(t){"number"==typeof t?n=t:"string"==typeof t?s=t:"object"==typeof t&&(s=t.type,n=t.time)}));const r=document.createElement("ui-lighttip");return"number"==typeof n&&(r.time=n),s&&(r.type=s),r.innerHTML=t,document.body.append(r),r.open=!0,r},customElements.get("ui-lighttip")||customElements.define("ui-lighttip",b),(()=>{let t="ui-loading";Object.defineProperty(HTMLElement.prototype,"loading",{configurable:!0,enumerable:!0,get(){return!(!this.classList.contains(t)&&!this.matches(t))},set(e){let i="remove";if(e&&(i="add",this.loading))return e;let s="ui-button";this.classList.contains(s)||this.getAttribute("is")==s?this.classList[i]("loading"):this.classList[i](t)}});let e=null,i=null;Object.defineProperty(document,"loading",{get:()=>Boolean(e&&e.isConnected),set(t){let s=function(t){return t&&"<ui-loading-text>"+t+"<ui-dot>...</ui-dot></ui-loading-text>"};if(t||""===t){e?(document.body.append(e),e.open=!0):(e=new Toast("1",0),e.loading=!0);let n=0,r=["正在加载中","仍在加载中","即将加载完毕"];"string"==typeof t?r=[t]:Array.isArray(t)&&(r=t),e.innerHTML=s(r[n]),clearInterval(i),i=setInterval((()=>{n++,e.innerHTML=s(r[n]||r[n-1]),n>=r.length-1&&clearInterval(i)}),6e3)}else e&&(e.remove(),clearInterval(i))}})})();class f extends HTMLElement{static get observedAttributes(){return["rows","size","color"]}constructor(){super()}get size(){return this.getAttribute("size")}set size(t){this.setAttribute("size",t)}get rows(){return this.getAttribute("rows")}set rows(t){this.setAttribute("rows",t)}get color(){return this.getAttribute("color")}set color(t){this.setAttribute("color",t)}render(t){t?"string"==typeof t&&(t=[t]):t=this.observedAttributes||[],t.forEach&&t.forEach((t=>{let e=this[t];null===e?this.style.removeProperty("--ui-"+t):this.style.setProperty("--ui-"+t,e)}))}attributeChangedCallback(t){this.render(t)}connectedCallback(){this.render()}}customElements.define("ui-loading",f);class y extends HTMLElement{static get observedAttributes(){return["open","opacity","color"]}constructor(){super()}get mode(){return this.getAttribute("mode")||"hide"}set mode(t){this.setAttribute("mode",t)}get open(){return this.hasAttribute("open")}set open(t){this.toggleAttribute("open",t)}get fade(){return this.hasAttribute("fade")}set fade(t){this.toggleAttribute("fade",t)}get opacity(){return this.getAttribute("opacity")}set opacity(t){this.setAttribute("opacity",t)}get color(){return this.getAttribute("color")}set color(t){this.setAttribute("color",t)}get touch(){return this.getAttribute("touch")}set touch(t){this.setAttribute("touch",t)}renderAttribute(t,e){"open"!=t&&("string"==typeof this[t]?this.style.setProperty("--ui-overlay-"+t,this[t]):e||this.style.removeProperty("--ui-overlay-"+t))}render(){y.observedAttributes.forEach((t=>{this.renderAttribute(t,!0)})),this[this.mode]?(this.setAttribute("tabIndex",0),this.setAttribute("role","button")):(this.removeAttribute("tabIndex"),this.removeAttribute("role"))}attributeChangedCallback(t){this.renderAttribute(t)}zIndex(){var t=19;this.parentElement&&[...this.parentElement.childNodes].forEach((e=>{if(1==e.nodeType&&e!==this&&!e.parentElement.zIndex){var i=window.getComputedStyle(e),s=1*i.zIndex;s&&"none"!=i.display&&(t=Math.max(s+1,t))}})),t>getComputedStyle(this).zIndex&&(this.style.zIndex=t)}attributeChangedCallback(t){"open"==t&&this.open&&(this.zIndex(),this.render())}connectedCallback(){this.render(),this.addEventListener("click",(()=>{this[this.mode]&&this[this.mode]()})),this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-overlay"}})),this.isConnectedCallback=!0}remove(){this.fade?this.addEventListener("animationend",(()=>{this.parentElement&&this.parentElement.removeChild(this)})):this.parentElement&&this.parentElement.removeChild(this),this.open=!1,this.dispatchEvent(new CustomEvent("remove"))}show(){this.open=!0,0==document.body.contains(this)&&document.body.append(this),this.dispatchEvent(new CustomEvent("show"))}hide(){this.open=!1,this.dispatchEvent(new CustomEvent("hide"))}}customElements.get("ui-overlay")||customElements.define("ui-overlay",y),window.Overlay=function(t){t=t||{};var e=Object.assign({},{fade:!0,mode:"remove",open:!0,touch:"none"},t);let i=new y;for(let t in e)i[t]=e[t];return document.body.append(i),i};class v extends HTMLElement{static get observedAttributes(){return["per","total","current","loading"]}constructor({per:t,total:e,current:i,loading:s,href:n,container:r=null}={}){super();const o=n||this.href?"a":"button";t&&(this.per=t),e&&(this.total=e),i&&this.setAttribute("current",i),this.loading=s,this.innerHTML=`<fieldset class="ui-page-wrap">\n            <${o} class="ui-page-item ui-page-prev">\n                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><path d="M85.876,100.5l49.537-50.526c4.089-4.215,4.089-11.049,0-15.262 c-4.089-4.218-10.719-4.218-14.808,0L63.586,92.868c-4.089,4.215-4.089,11.049,0,15.264l57.018,58.156 c4.089,4.215,10.719,4.215,14.808,0c4.089-4.215,4.089-11.049,0-15.262L85.876,100.5z"></path></svg>\n            </${o}>\n            <div class="ui-page"></div>\n            <${o} class="ui-page-item ui-page-next">\n                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><path d="M85.876,100.5l49.537-50.526c4.089-4.215,4.089-11.049,0-15.262 c-4.089-4.218-10.719-4.218-14.808,0L63.586,92.868c-4.089,4.215-4.089,11.049,0,15.264l57.018,58.156 c4.089,4.215,10.719,4.215,14.808,0c4.089-4.215,4.089-11.049,0-15.262L85.876,100.5z"></path></svg>\n            </${o}>\n        </fieldset>`,this.element=new Proxy(this.element||{},{get:(t,e)=>"trigger"==e?this.htmlFor&&document.getElementById(this.htmlFor):t[e],set:(t,e,i)=>(t[e]=i,!0)}),"string"==typeof r&&(r=document.querySelector(r)),r&&r.append(this)}get per(){return Number(this.getAttribute("per"))||15}get simple(){return"short"===this.getAttribute("mode")}get total(){return Number(this.getAttribute("total"))||0}get current(){return Number(this.getAttribute("current"))||1}get loading(){return null!==this.getAttribute("loading")}get href(){return this.getAttribute("href")}set current(t){this.setAttribute("current",Math.min(Math.max(1,t),this.count))}set per(t){this.setAttribute("per",t)}set total(t){this.setAttribute("total",t)}set loading(t){t?this.setAttribute("loading",""):this.removeAttribute("loading")}get htmlFor(){return this.getAttribute("for")}set htmlFor(t){this.setAttribute("for",t)}render(t,e){let i=this.element.page;if(!i)return;const s=this.href?"a":"button";this.count=Math.ceil(e/t)||1;const n=Math.min(Math.max(1,this.current),this.count);if(this.simple)i.innerHTML=`<div class="ui-page-simple ui-page-item" >${n} / ${this.count}</div>`;else{const t=Array.from({length:this.count}).splice(0,7).map(((t,e)=>`<${s} class="ui-page-item" data-current="${e+1}" aria-label="第${e+1}页，共${this.count}页">${e+1}</${s}>`)).join("");i.innerHTML=t}clearTimeout(this.timerRender),this.timerRender=setTimeout((()=>{this.updatePage(n)}))}updatePage(t=this.current){let e=this.element.page,i=this.element.prev,s=this.element.next;if(1==t?(i.setAttribute("disabled",!0),i.setAttribute("aria-label","已经是第一页了"),i.removeAttribute("href")):(i.removeAttribute("disabled"),i.setAttribute("aria-label",`上一页，当前第${t}页`),i.href=this.href?this.href.replace(/\${current}/g,t-1):"javascript:;"),t==this.count?(s.setAttribute("disabled",!0),s.setAttribute("aria-label","已经是最后一页了"),s.removeAttribute("href")):(s.removeAttribute("disabled"),s.setAttribute("aria-label",`下一页，当前第${t}页`),s.href=this.href?this.href.replace(/\${current}/g,t+1):"javascript:;"),this.simple)e.querySelector(".ui-page-simple").textContent=t+" / "+this.count;else if(this.count>7){let i=[];switch(t){case 1:case 2:case 3:case 4:i=[1,2,3,4,5,"next",this.count];break;case this.count:case this.count-1:case this.count-2:case this.count-3:i=[1,"pre",this.count-4,this.count-3,this.count-2,this.count-1,this.count];break;default:i=[1,"pre",t-1,t,t+1,"next",this.count]}e.querySelectorAll(".ui-page-item").forEach(((e,s)=>{"number"==typeof i[s]?(e.dataset.current=i[s],e.textContent=i[s],e.disabled=!1,e.href="javascript:;",i[s]==t?e.setAttribute("current",""):e.removeAttribute("current"),e.removeAttribute("disabled"),e.setAttribute("aria-label",`第${i[s]}页，共${this.count}页`),this.href&&(e.href=this.href.replace(/\${current}/g,e.dataset.current))):(e.textContent="...",e.removeAttribute("current"),e.removeAttribute("data-current"),e.removeAttribute("aria-label"),e.setAttribute("disabled",!0),e.removeAttribute("href"))}))}else e.querySelectorAll(".ui-page-item").forEach((e=>{e.dataset.current==t?e.setAttribute("current",""):e.removeAttribute("current"),this.href&&(e.href=this.href.replace(/\${current}/g,e.dataset.current))}))}connectedCallback(){let t=this.querySelector("fieldset");if(!t)return;let e=t.querySelector(".ui-page"),i=t.firstElementChild,s=t.lastElementChild;this.element.wrap=t,this.element.page=e,this.element.prev=i,this.element.next=s,this.render(this.per,this.total),e.addEventListener("click",(t=>{const e=t.target.closest(".ui-page-item");e&&(this.nativeClick=!0,this.current=Number(e.dataset.current))})),i.addEventListener("click",(()=>{this.nativeClick=!0,this.current--})),s.addEventListener("click",(()=>{this.nativeClick=!0,this.current++})),this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-pagination"}})),this.isConnectedCallback=!0,this.dispatchEvent(new CustomEvent("DOMContentLoaded"))}attributeChangedCallback(t,e,i){if(!this.element||e===i)return;let s=this.element.trigger,n=this.element.wrap;"per"==t?(this.render(i,this.total),s&&(s.dataset.per=i)):"total"==t?(this.render(this.per,i),s&&(s.dataset.total=i)):"loading"==t?(n.disabled=null!==i,s&&(s.dataset.loading=null!==i)):"current"==t&&e!==i&&(clearTimeout(this.timerRender),this.timerRender=setTimeout((()=>{this.updatePage(Number(i))})),s&&(s.dataset.current=i),this.nativeClick&&(this.nativeClick=!1,this.dispatchEvent(new CustomEvent("change",{detail:{current:Number(i),per:this.per,total:this.total}})),s&&s!=this&&s.dispatchEvent(new CustomEvent("change",{detail:{current:Number(i),per:this.per,total:this.total}}))))}}customElements.get("ui-pagination")||customElements.define("ui-pagination",v),window.Pagination=v,HTMLElement.prototype.pagination=function(t){if(this.matches("ui-pagination")||this["ui-pagination"])return this;const{total:e=0,current:i=1,per:s=15,href:n=null,loading:r=!1}=this.dataset;let o=Object.assign({},{per:s,total:e,href:n,loading:r},t||{});const a=new Pagination(o),l=this.id||("lulu_"+Math.random()).replace("0.","");return this.innerHTML="",this.id=l,this["ui-pagination"]=a,a.htmlFor=l,a.setAttribute("current",i),a.addEventListener("connected",(()=>{this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-pagination"}})),a.remove(),this.dispatchEvent(new CustomEvent("DOMContentLoaded"))})),document.body.append(a),this.append.apply(this,[...a.children]),this.setAttribute("defined",""),this},function(){const t=t=>{(t||document.querySelectorAll("[is-pagination]")).forEach((t=>{t.pagination()}))},e=()=>{t();new MutationObserver((e=>{e.forEach((e=>{e.addedNodes&&e.addedNodes.forEach((e=>{e.tagName&&(e.hasAttribute("is-pagination")?t([e]):t(e.querySelectorAll("[is-pagination]")))}))}))})).observe(document.body,{childList:!0,subtree:!0})};"loading"!=document.readyState?e():window.addEventListener("DOMContentLoaded",e)}();class E extends HTMLElement{static get observedAttributes(){return["open","height","width","radius","background","close-icon"]}constructor(t){super(),this.element||(this.element={}),this.element.overlay=new y;let e=document.createElement("ui-popup-container");this.element.container=e;let i=document.createElement("button");i.setAttribute("part","close"),i.textContent="关闭",i.addEventListener("click",(()=>{this[this.mode]?this[this.mode]():this.hide()})),this.element.close=i,this.childNodes.length&&(this.content=this.childNodes),this.append(e),this.setParams(t)}get mode(){return this.getAttribute("mode")||"hide"}set mode(t){this.setAttribute("mode",t)}get open(){return this.hasAttribute("open")}set open(t){this.toggleAttribute("open",t)}get transition(){return this.hasAttribute("transition")}set transition(t){this.toggleAttribute("transition",t)}get background(){return this.getAttribute("background")}set background(t){this.setAttribute("background",t)}get position(){return this.getAttribute("position")||"bottom"}set position(t){this.setAttribute("position",t)}get overlay(){return this.hasAttribute("overlay")}set overlay(t){this.toggleAttribute("overlay",Boolean(t))}get content(){return this.originContent}get closeIcon(){return this.getAttribute("close-icon")}set closeIcon(t){this.setAttribute("close-icon",t)}get closeable(){return this.hasAttribute("close-icon")}set closeable(t){this.toggleAttribute("close-icon",Boolean(t))}set content(t){this.originContent=t;let e=this.element.container,i=this.element.close;if("function"==typeof t)t=t();else if("string"==typeof t&&/^#?\w+(?:[-_]\w+)*$/i.test(t)){let e=document.querySelector(t);e&&(t=e.matches("textarea")?e.value:e.matches("script")?e.innerHTML:e.matches("template")?document.importNode(e.content,!0):e)}if(this.hasAttribute("mode")||this.isConnectedCallback||(this.mode="string"==typeof t?"remove":"hide"),e.contains(i)&&i.remove(),e.innerHTML="",this.closeable&&e.prepend(i),"string"==typeof t)e.insertAdjacentHTML("afterbegin",t);else if(t.length&&!t.tagName)t.owner=this,[...t].forEach((t=>{"string"==typeof t?e.insertAdjacentHTML("afterbegin",t):e.appendChild(t)}));else if("number"==typeof t.nodeType){t.owner=this,e.append(t);var s=()=>{t.removeAttribute&&(t.removeAttribute("hidden"),t.style&&"none"==t.style.display&&(t.style.display=""),"none"==getComputedStyle(t).display&&(t.style.display="revert")),this.removeEventListener("connected",s)};this.isConnectedCallback?s():this.addEventListener("connected",s)}}get radius(){let t=this.getAttribute("radius");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set radius(t){!0!==t&&!1!==t?this.setAttribute("radius",t):this.toggleAttribute("radius",t)}get height(){let t=this.getAttribute("height");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set height(t){this.setAttribute("height",t)}get width(){let t=this.getAttribute("width");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set width(t){this.setAttribute("width",t)}setParams(t){if(!t||!Object.keys(t).length)return;for(let e in t)"function"==typeof t[e]?this.addEventListener(e.toLowerCase().replace(/^on/,""),(()=>{t[e]()})):this[e]=t[e];let e=this.element&&this.element.overlay;if("string"==typeof t.overlay)this.setAttribute("overlay",t.overlay);else if("object"==typeof t.overlay&&e)for(let i in t.overlay)e[i]=t.overlay[i];let i=this.element&&this.element.container;if("object"==typeof t.style&&i)for(let e in t.style)if("string"==typeof e){let s=e.replace(/([a-z])([A-Z])/,(function(t,e,i){return[e,i.toLowerCase()].join("-")}));i.style.setProperty(s,t.style[e])}}renderAttribute(t,e){if(!t||"open"==t)return;let i=t.replace(/\-(\w)/g,((t,e)=>e.toUpperCase()));if("closeIcon"==i&&this[i]&&/^(?:#|\.)?(?:\w|-)+$/.test(this[i].replace(/\s/g,""))){if(/^(?:#|\.)(?:\w|-)+$/.test(this[i].replace(/\s/g,""))){let t=this.querySelector(this[i]);t&&!t.isBindClose&&(this.element.close.style.display="none",t.addEventListener("click",(()=>{this.element.close.click()})),t.isBindClose=!0)}}else this[i]?this.style.setProperty("--ui-popup-"+t,this[i]):e||this.style.removeProperty("--ui-popup-"+t)}render(){E.observedAttributes.forEach((t=>{this.renderAttribute(t,!0)}))}attributeChangedCallback(t){this.renderAttribute(t)}zIndex(){this.element.overlay.zIndex.call(this)}attributeChangedCallback(t){"open"==t&&(this.open&&(this.zIndex(),this.render()),this.element.overlay.open=this.open)}connectedCallback(){this.render();let t=this.element.overlay;if(this.overlay){t.open=this.open,t.fade=this.transition,this.touch&&(t.touch=this.touch),this.getAttribute("overlay").trim().replace(/\{|\}/g,"").split(",").forEach((e=>{/:/.test(e)&&(t[e.split(":")[0].trim()]=e.split(":")[1].trim())})),t.setAttribute("aria-label","弹出层后方的覆盖层"+(t[t.mode]?"，点击关闭弹出层":"")),this.prepend(t),t.hasAttribute("mode")&&!/^(?:hide|remove)$/.test(t.mode)||(t.mode="bubbling",t.bubbling=()=>{this[this.mode]&&this[this.mode]()})}let e=this.element.close;this.closeable&&0==this.contains(e)&&this.element.container.prepend(e),this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-popup"}})),this.isConnectedCallback=!0}remove(){let t=this.element.container;if(this.transition){const e=()=>{this.parentElement&&this.parentElement.removeChild(this),t.removeEventListener("transitionend",e)};t.addEventListener("transitionend",e)}else this.parentElement&&this.parentElement.removeChild(this);this.open=!1,this.dispatchEvent(new CustomEvent("remove"))}show(){0==document.body.contains(this)&&(document.body.append(this),this.transition&&this.offsetHeight),this.open=!0,this.dispatchEvent(new CustomEvent("show"))}hide(){this.open=!1,this.dispatchEvent(new CustomEvent("hide"))}}customElements.get("ui-popup")||customElements.define("ui-popup",E),window.Popup=function(t,e){"object"!=typeof t||t.nodeName||t.forEach||(e=t),e=e||{};var i=Object.assign({},{transition:!0,overlay:{}},e);void 0===i.overlay.touch&&(i.overlay.touch="none");let s=new E;t&&(s.content=t);let n=i.open;return!0===n&&delete i.open,s.setParams(i),!1!==n&&setTimeout((()=>{s.show()}),1),s};class A extends HTMLProgressElement{static get observedAttributes(){return["color","height","radius","width","value","label"]}get color(){return this.getAttribute("color")}set color(t){this.setAttribute("color",t)}get label(){return this.getAttribute("label")}set label(t){this.setAttribute("label",t)}get radius(){let t=this.getAttribute("radius");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set radius(t){this.setAttribute("radius",t)}get height(){let t=this.getAttribute("height");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set height(t){this.setAttribute("height",t)}get width(){let t=this.getAttribute("width");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set width(t){this.setAttribute("width",t)}setLabel(){let t=this.label;if(!t&&""!==t)return;this.style.setProperty("--ui-progress-offset",Math.round(this.getBoundingClientRect().width*(this.value/this.max))),this.style.setProperty("--ui-progress-percent",Math.round(this.value/this.max*100)+"%"),"true"==t||""===t?this.style.setProperty("--ui-progress-label",`'${Math.round(this.value/this.max*100)+"%"}'`):this.style.setProperty("--ui-progress-label",`'${new Function(...["max","value"],`return \`${t}\`;`)(this.max,this.value)}'`);let e=this.element.label;if(e){e.setAttribute("style",this.getAttribute("style")),e.className=this.className;let t=this.getBoundingClientRect();e.style.width=t.width+"px",e.style.height=t.height+"px";let i=e.getBoundingClientRect(),s=getComputedStyle(e),n=s.getPropertyValue("--ui-offset-x")||0,r=s.getPropertyValue("--ui-offset-y")||0,o=t.left-i.left,a=t.top-i.top;e.style.setProperty("--ui-offset-x",Number(n)+o),e.style.setProperty("--ui-offset-y",Number(r)+a)}}renderAttribute(t,e){"value"!==t&&"label"!=t?"string"==typeof this[t]?this.style.setProperty("--ui-progress-"+t,this[t]):e||this.style.removeProperty("--ui-progress-"+t):this.setLabel()}render(){A.observedAttributes.forEach((t=>{this.renderAttribute(t,!0)}))}attributeChangedCallback(t){this.render(t)}constructor(){super(),this.element||(this.element={}),this.render();const t=Object.getOwnPropertyDescriptor(HTMLProgressElement.prototype,"value");if(Object.defineProperty(A.prototype,"value",{...t,set(e){t.set.call(this,e),this.renderAttribute("value")}}),this.hasAttribute("label")&&(CSS.supports("-moz-appearance:none")||!CSS.supports("text-align-last:justify"))){let t=document.createElement("label");this.id&&t.setAttribute("for",this.id),t.setAttribute("is","ui-progress"),this.element.label=t}new ResizeObserver((()=>{this.setLabel()})).observe(this)}connectedCallback(){let t=this.element.label;if(t){this.insertAdjacentElement("beforebegin",t),"static"==getComputedStyle(t).position&&(t.style.position="absolute");let e=getComputedStyle(this).zIndex;"number"==typeof e&&(t.style.zIndex=e+1),this.setLabel()}this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-progress"}})),this.isConnectedCallback=!0}}customElements.get("ui-progress")||customElements.define("ui-progress",A,{extends:"progress"});class w extends HTMLInputElement{static get observedAttributes(){return["extends","checked","disabled"]}get extends(){return this.hasAttribute("extends")}set extends(t){this.toggleAttribute("extends",t)}render(){this.extends&&document.querySelectorAll(`[is="ui-radio"][extends][name="${this.name}"]`).forEach((t=>{[...t.labels].forEach((e=>{e.classList[t.checked?"add":"remove"]("active"),e.classList[t.disabled?"add":"remove"]("disabled"),e.setAttribute("role","button")}))}))}attributeChangedCallback(){this.render()}constructor(){super(),this.addEventListener("change",(()=>{this.render()})),this.render();const t=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"checked");Object.defineProperty(w.prototype,"checked",{...t,set(e){t.set.call(this,e),this.render()}})}connectedCallback(){this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-radio"}})),this.isConnectedCallback=!0}}customElements.get("ui-radio")||customElements.define("ui-radio",w,{extends:"input"});class x extends HTMLInputElement{static get observedAttributes(){return["max","min","step","disabled"].concat(x.observedUIAttributes)}static get observedUIAttributes(){return["color","width","height","size"]}constructor(){super(),this.originTips=this.getAttribute("tips"),this.element||(this.element={})}get defaultrange(){return this.getAttribute("range")||`${this.getAttribute("from")||this.min||0}, ${this.getAttribute("to")||this.max||100}`}set multiple(t){return this.toggleAttribute("multiple",t)}get multiple(){return null!==this.getAttribute("multiple")}get from(){return this.element.brother?Math.min(this.value,this.element.brother.value):""}get to(){return this.element.brother?Math.max(this.value,this.element.brother.value):""}get range(){return this.multiple?this.from+","+this.to:""}get isFrom(){return!!this.element.brother&&this.value-this.element.brother.value<0}set from(t){this.element.brother&&(this.isFrom?this.value=t:this.element.brother.value=t)}set to(t){this.element.brother&&(this.isFrom?this.element.brother.value=t:this.value=t)}set range(t){if(this.multiple){const[e,i]=t.split(",");this.to=i,this.from=e}}set tips(t){t?(this.originTips||(this.originTips=t),this.setAttribute("tips",t)):this.removeAttribute("tips")}get tips(){const t=this.originTips;return t?`${new Function(...["value"],`return \`${t}\`;`)(this.value)}`:null}get color(){return this.getAttribute("color")}set color(t){this.setAttribute("color",t)}get height(){let t=this.getAttribute("height");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set height(t){this.setAttribute("height",t)}get size(){let t=this.getAttribute("size");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set size(t){this.setAttribute("size",t)}get width(){let t=this.getAttribute("width");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set width(t){this.setAttribute("width",t)}setMultiple(){let t=this.element.brother,e=this.getBoundingClientRect();t.style.width=e.width+"px",t.style.height=e.height+"px";let i=t.getBoundingClientRect(),s=getComputedStyle(t),n=s.getPropertyValue("--ui-offset-x")||0,r=s.getPropertyValue("--ui-offset-y")||0,o=e.left-i.left,a=e.top-i.top;console.log(e.left,i.left),t.style.setProperty("--ui-offset-x",Number(n)+o),t.style.setProperty("--ui-offset-y",Number(r)+a)}connectedCallback(){this.addEventListener("input",this.renderPosition),this.addEventListener("touchstart",this.stopPropagation);let t=this.element.brother;if(null===this.getAttribute("is")&&this.setAttribute("is","ui-range"),this.multiple&&!t&&"brother"!==this.getAttribute("rel")){t=this.cloneNode(!1),t.removeAttribute("id"),t.originTips=this.originTips,t.element={brother:this},this.element.brother=t,this.before(t),t.setAttribute("rel","brother"),this.range=this.defaultrange,new ResizeObserver((()=>{this.setMultiple()})).observe(this)}this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-range"}})),this.isConnectedCallback=!0,this.render(),t&&"brother"==t.getAttribute("rel")&&this.setMultiple(),this.dispatchEvent(new CustomEvent("DOMContentLoaded"))}disconnectedCallback(){this.removeEventListener("input",this.renderPosition),this.removeEventListener("touchstart",this.stopPropagation),this.element.brother&&!this.exchange&&this.element.brother.remove()}stopPropagation(t){t.stopPropagation()}attributeChangedCallback(t,e,i){e!==i&&("disabled"===t&&this.element.brother?this.element.brother.disabled=null!==i:["color","width","height"].includes(t)?this.renderAttribute(t):this.renderPosition())}renderAttribute(t,e){this[t]||"string"==typeof this[t]?(this.style.setProperty("--ui-range-"+t,this[t]),"size"==t&&/^[a-z]+$/i.test(String(this[t]))&&this.style.removeProperty("--ui-range-"+t)):e||this.style.removeProperty("--ui-range-"+t)}renderPosition(){const t=this.max||100,e=this.min||0;this.style.setProperty("--percent",(this.value-e)/(t-e)),this.tips=this.tips,this.style.setProperty("--from",this.from),this.style.setProperty("--to",this.to);const i=this.element.brother;i&&(i.style.setProperty("--from",this.from),i.style.setProperty("--to",this.to))}render(){this.renderPosition(),x.observedUIAttributes.forEach((t=>{this.renderAttribute(t,!0)}))}addEventListener(...t){document.addEventListener.apply(this,t),this.element.brother&&document.addEventListener.apply(this.element.brother,t)}}const C=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");Object.defineProperty(x.prototype,"value",{...C,set(t){C.set.call(this,t),this.renderPosition()}}),customElements.get("ui-range")||customElements.define("ui-range",x,{extends:"input"});class L extends HTMLElement{static get observedAttributes(){return["open"]}constructor(){super(),this.events()}get name(){return this.getAttribute("name")}set name(t){this.setAttribute("name",t)}get target(){return this.getAttribute("target")}set target(t){this.setAttribute("target",t)}get open(){return this.hasAttribute("open")}set open(t){this.toggleAttribute("open",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){this.toggleAttribute("disabled",t)}onSwitch(){}switch(){let t=this.name,e=this.tagName.toLowerCase(),i=[];t?(i=document.querySelectorAll(e+'[name="'+t+'"]'),this.open||(i.forEach((t=>{t.open&&(t.open=!1)})),this.open=!0)):this.open=!this.open}events(){this.addEventListener("click",(t=>{/^(:?javas|#)/.test(t.target.getAttribute("href"))&&t.preventDefault(),this.disabled||this.switch()}),!1)}connectedCallback(){this.dispatchEvent(new CustomEvent("connected",{detail:{type:this.tagName.toLowerCase()}})),this.dispatchEvent(new CustomEvent("DOMContentLoaded"))}attributeChangedCallback(t,e,i){if("open"===t&&typeof e!=typeof i){const t=document.getElementById(this.target);t&&t.classList[this.open?"add":"remove"]("active");let e=this.tagName.toLowerCase();this.open?(this.setAttribute("aria-selected","true"),this.dispatchEvent(new CustomEvent("show",{detail:{type:e}}))):(this.setAttribute("aria-selected","false"),this.dispatchEvent(new CustomEvent("hide",{detail:{type:e}}))),this.dispatchEvent(new CustomEvent("switch")),this.onSwitch()}}}customElements.get("ui-rel")||customElements.define("ui-rel",L);class S extends L{get history(){return this.hasAttribute("history")}set history(t){this.toggleAttribute("history",t)}onSwitch(){let t=document.getElementById(this.target);const e=window.location;let i=this.name;if(1==this.history&&i&&0==/tab\d{10,16}/.test(i)&&this.open){if(!t)return;let s=t.id;const n=new URLSearchParams(e.search);n.set(i,s);let r=e.hash;s==r&&(e.hash=r=""),window.history.replaceState(null,document.title,e.href.split("?")[0]+"?"+n.toString()+r)}}connectedCallback(){this.closest("a, button")||this.querySelector("a, button")||this.setAttribute("tabindex","0"),this.setAttribute("role","tab");let t=document.getElementById(this.target);t&&t.setAttribute("role","tabpanel"),new URLSearchParams(window.location.search).forEach(((e,i)=>{t&&this.name==i&&t.id==e&&!this.open&&this.click()})),this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-tab"}})),this.isConnectedCallback=!0,this.dispatchEvent(new CustomEvent("DOMContentLoaded"))}}customElements.get("ui-tab")||customElements.define("ui-tab",S);class M extends HTMLElement{constructor(){super(),this.setAttribute("role","tablist"),new ResizeObserver((()=>{this.setVar(this.selectedTab)})).observe(this)}get selectedTab(){return this.querySelector("ui-tab[open]")}set selectedTab(t){t&&t.switch&&t.switch()}get selectedIndex(){return[...this.tabs].indexOf(this.selectedTab)}set selectedIndex(t){this.selectedTab=this.tabs[t]}get tabs(){return this.querySelectorAll("ui-tab")}set tabs(t){t&&this.append.apply(this,[...t])}setVar(t){let e=t.offsetLeft,i=t.clientWidth,s=document.createElement("div");s.style.position="absolute",s.textContent=t.textContent,t.append(s);let n=s.clientWidth;this.style.setProperty("--ui-tab-width",n),this.style.setProperty("--ui-tab-left",e+(i-n)/2),s.remove();let r=this.offsetWidth,o=this.scrollLeft;this.scrollLeft=this.scrollLeft+(e-o-r/2+i/2)}connectedCallback(){let t=this.tabs;if(t.length&&!this.querySelector("ui-tab[name]")){let e=this.id||"lu_"+setTimeout(0);t.forEach((t=>{t.name=e,t.open&&this.setVar(t),t.addEventListener("show",(()=>{this.setVar(t),this.dispatchEvent(new CustomEvent("switch"))}))}))}}}customElements.get("ui-tabs")||customElements.define("ui-tabs",M);class N extends HTMLElement{constructor(){super(),this.element=this.element||{}}create(){let t=this.element.buttons,e=0;if(t.length){[...t].reverse().forEach(((t,i)=>{let s=t.offsetWidth;t.style.setProperty("--ui-offset-width",e),t.style.setProperty("--ui-offset-index",i+1),e+=s}));let i=document.createElement("ui-cell");t[0].insertAdjacentElement("beforebegin",i),this.style.setProperty("--ui-cell-width",e+"px"),this.space=this.cell=i,this.addEventListener("scroll",(()=>{this.style.setProperty("--ui-offset-percent",(this.scrollLeft/e).toFixed(2))}))}}connectedCallback(){this.element.buttons=this.querySelectorAll(":scope > button"),this.create()}}customElements.get("ui-scroll-snap-cell")||customElements.define("ui-scroll-snap-cell",N);class T extends HTMLElement{constructor(){super(),this.events()}static get observedAttributes(){return["loop","type","stop","align","padding"]}set type(t){this.setAttribute("type",t)}get type(){let t="both";return this.closest("ui-scroll-snap-swipe")&&(t="x mandatory"),this.getAttribute("type")||t}set stop(t){this.setAttribute("stop",t)}get stop(){return this.getAttribute("stop")||"normal"}set loop(t){this.toggleAttribute("loop",t)}get loop(){return this.hasAttribute("loop")}set align(t){"center"==t&&(t="centre"),this.setAttribute("align",t)}get align(){let t=this.getAttribute("align");return"start"===t&&"end"===t||(t="center"),t}appendItemForScroll(){if(this.isAppendItem)return;let t=this.items;var e="height",i="top";this.type.split(/\s/).includes("x")&&(e="width",i="left");let s=e.replace(/^[a-z]/,(function(t){return t.toUpperCase()})),n=i.replace(/^[a-z]/,(function(t){return t.toUpperCase()})),r=this["client"+s],o=this["scroll"+s];if(o<=r)return;let a=document.createDocumentFragment(),l=document.createDocumentFragment();[...t].forEach((t=>{let e=t.cloneNode(!0),i=t.cloneNode(!0);e.removeAttribute("selected"),i.removeAttribute("selected"),a.appendChild(e),l.appendChild(i)})),this.prepend(l),this.append(a);let h=this.querySelectorAll("ui-scroll-snap-item"),d=h[h.length-1],c=t[0]["offset"+n]-this["offset"+n];this["scroll"+n]=c;let u=c;this.addEventListener("scroll",(()=>{let e=this["scroll"+n];r=this["client"+s],o=this["scroll"+s],e<u&&0==e?(this.onScrollStart&&this.onScrollStart(h,t,c),this.style.scrollBehavior="auto",this["scroll"+n]=c):e>u&&e>=o-r-1&&(this.onScrollEnd&&this.onScrollEnd(h,t,c),this.style.scrollBehavior="auto",this["scroll"+n]-=d["offset"+n]-t[t.length-1]["offset"+n]),u=this["scroll"+n];let i=this.querySelector("ui-scroll-snap-item[selected]");i&&(i.selected=!1),setTimeout((()=>{this.style.scrollBehavior=""}),1)})),this.onScrollInited&&this.onScrollInited(h,t,c),this.isAppendItem=!0}events(){this.addEventListener("scroll",(()=>{clearTimeout(this.timerScroll),this.timerScroll=setTimeout((()=>{let t=this.type;var e="height",i="top";t.split(/\s/).includes("x")&&(e="width",i="left");let s=this.getBoundingClientRect();[].slice.call(this.children).forEach(((t,n)=>{let r=t.align||this.align,o=s[i]+s[e]/2;"start"==r?o=s[i]:"end"==r&&(o=s[i]+s[e]);let a=t.getBoundingClientRect(),l=a[i]+a[e]/2;"start"==r?l=a[i]:"end"==r&&(l=a[i]+s[e]),Math.abs(l-o)<5?(t.selected=!0,this.dispatchEvent(new CustomEvent("scrollEnd",{detail:{index:n,item:t}}))):t.selected=!1}))}),100)}))}attributeChangedCallback(t){"loop"===t&&this.loop&&this.appendItemForScroll()}connectedCallback(){this.items=this.querySelectorAll("ui-scroll-snap-item"),this.loop&&this.appendItemForScroll()}}customElements.get("ui-scroll-snap")||customElements.define("ui-scroll-snap",T);class k extends HTMLElement{static get observedAttributes(){return["margin","align"]}constructor(){super(),this.addEventListener("click",(function(){let t=this.href;t&&(location.href=t)}))}set align(t){this.setAttribute("type",t)}get align(){return getComputedStyle(this).scrollSnapAlign||"center"}set selected(t){this.toggleAttribute("selected",t)}get selected(){return this.hasAttribute("selected")}set disabled(t){this.toggleAttribute("disabled",t)}get disabled(){return this.hasAttribute("disabled")}get href(){return this.getAttribute("href")}set href(t){this.setAttribute("href",t)}position(){const t=this.snap;if(t&&this.selected){let n=this.align;var e="height",i="top",s="scrollTop";t.type.split(/\s/).includes("x")&&(e="width",i="left",s="scrollLeft");let r=t[s],o=0,a=t.getBoundingClientRect(),l=this.getBoundingClientRect();o=a[i]+a[e]/2-(l[i]+l[e]/2),"start"==n?o=a[i]-l[i]:"end"==n&&(o=a[i]+a[e]-(l[i]+l[e])),t[s]=r-o}}connectedCallback(){if(this.snap=this.closest("ui-scroll-snap"),!this.snap)return this;this.position(),this.hasAttribute("href")&&this.setAttribute("role","link")}}customElements.get("ui-scroll-snap-item")||customElements.define("ui-scroll-snap-item",k);class P extends HTMLElement{constructor(){super()}get snap(){return this.querySelector("ui-scroll-snap")}set snap(t){this.append(t)}get autoplay(){let t=this.getAttribute("autoplay");return"string"==typeof t&&(/^\d+$/.test(t)?1*t:3e3)}set autoplay(t){t||""===t?this.setAttribute("autoplay",t):this.removeAttribute("autoplay")}create(){let t=this.querySelector("ui-swipe-control");t||(t=document.createElement("ui-swipe-control"),this.append(t)),t.innerHTML="";let e=this.snap,i=e.querySelectorAll("ui-scroll-snap-item"),s=[...i].map((e=>{let i=document.createElement("ui-swipe-control-item");return e.selected&&i.setAttribute("selected",""),t.append(i),i}));this.control=t,this.controlItems=s,e.addEventListener("scrollEnd",(t=>{let e=t.detail;s.forEach(((t,s)=>{e.index%i.length===s?t.setAttribute("selected",""):t.removeAttribute("selected")})),this.autoSwipe()})),e.addEventListener("scroll",(()=>{clearTimeout(this.timer)})),t.querySelector("[selected]")||s[0].toggleAttribute("selected")}autoSwipe(){let t=this.autoplay,e=this.snap.querySelectorAll("ui-scroll-snap-item");if(t&&e.length){clearTimeout(this.timer);let i=[...e].findIndex((t=>t.hasAttribute("selected")));i++,i>=e.length&&(i=0),this.timer=setTimeout((()=>{e[i].selected=!0,e[i].position(),this.autoSwipe()}),t)}}connectedCallback(){let t=this.snap;t&&(t.type="x mandatory",this.create(),t.loop=!0,t.stop=!0,this.autoSwipe())}}customElements.get("ui-scroll-snap-swipe")||customElements.define("ui-scroll-snap-swipe",P);class H extends HTMLElement{constructor(){super()}get target(){return this.getAttribute("target")}set target(t){this.setAttribute("target",t)}get snap(){let t=this.target;return t?document.getElementById(t):this.querySelector("ui-scroll-snap")}set snap(t){this.append(t)}events(){let t=this.snap,e=this.querySelector("ui-tabs"),i=t&&t.items;t&&!t.isEventBind&&(t.type="x mandatory",t.toggleAttribute("smooth",!0),t.stop=!0,t.addEventListener("scrollEnd",(t=>{let i=t.detail&&t.detail.index;"number"==typeof i&&e&&(e.selectedIndex=i)})),t.isEventBind=!0),e&&!e.isEventBind&&(e.addEventListener("switch",(()=>{let t=e.selectedIndex;i&&i[t]&&(i[t].selected=!0,i[t].position()),this.dispatchEvent(new CustomEvent("switch",{detail:{index:t}}))})),e.isEventBind=!0)}connectedCallback(){this.events()}}customElements.get("ui-scroll-snap-tab")||customElements.define("ui-scroll-snap-tab",H);class I extends HTMLSelectElement{static get observedAttributes(){return["width","height","radius","open","color"]}constructor(){super(),this.element||(this.element={trigger:null,popup:null}),this.resizeObserver=null,this.intersectionObserver=null,this.setProperty()}set popup(t){this.toggleAttribute("popup",Boolean(t)),this.element.popup||(this.create(),this.events())}get popup(){return this.hasAttribute("popup")}set open(t){this.toggleAttribute("open",Boolean(t))}get open(){return this.hasAttribute("open")}get height(){let t=this.getAttribute("height");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set height(t){this.setAttribute("height",t)}get width(){let t=this.getAttribute("width");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set width(t){this.setAttribute("width",t)}get font(){let t=this.getAttribute("font");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set font(t){this.setAttribute("font",t)}get color(){return this.getAttribute("color")}set color(t){this.setAttribute("color",t)}get radius(){let t=this.getAttribute("radius");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set radius(t){this.setAttribute("radius",t)}create(){if(!this.element.trigger&&this.hasAttribute("trigger")&&(this.element.trigger=document.getElementById(this.getAttribute("trigger"))),!this.element.trigger){let t=document.createElement("ui-select");t.setAttribute("is","ui-select"),this.insertAdjacentElement("beforebegin",t),"static"==getComputedStyle(t).position&&(t.style.position="absolute");let e=getComputedStyle(this).zIndex;"number"==typeof e&&(t.style.zIndex=e+1),this.element.trigger=t,this.resize()}this.element.popup||(this.element.popup=new E({transition:!0,overlay:{touch:"none"},radius:!0,width:"calc(100% - 2rem)",style:{maxHeight:"calc(100% - 10rem)"}})),this.dispatchEvent(new CustomEvent("DOMContentLoaded"))}refresh(){let t=this.element.popup;if(!t)return;if(!this.options.length)return void(t.content='<div class="ui-select-empty">没有选项</div>');let e="radio";const i=this.multiple;i&&(e="checkbox");let s=("n"+Math.random()).replace("0.",""),n=-1,r=t=>{let i=document.createElement("ui-list-item");return i.className=t.className,i.setAttribute("space",""),n++,i.innerHTML=`<input\n                    type="${e}"\n                    name="${s}"\n                    value="${t.value}"\n                    ${t.selected?"checked":""}\n                    ${t.disabled?"disabled":""}\n                    data-index="${n}"\n                >${t.innerHTML}`,i},o=document.createElement("form");if([...this.children].forEach((t=>{let e=null;t.matches("optgroup")?(e=document.createElement("ui-list"),t.label&&e.setAttribute("label",t.label),t.disabled&&e.setAttribute("disabled",""),e.className=t.className,t.querySelectorAll("option").forEach((i=>{t.disabled&&(i.disabled=!0),e.appendChild(r(i))}))):t.matches("option")&&(e=r(t)),o.appendChild(e)})),i){let t=document.createElement("ui-flex");t.innerHTML='<button type="reset" is="ui-button" blank>重置</button>\n                <hr v>\n                <button type="button" is="ui-button" data-type="primary" blank>确定</button>',o.append(t)}t.content=o}events(){const t=this.element.trigger,e=this.element.popup;if(t&&e){t.addEventListener("click",(()=>{e.show()})),e.addEventListener("show",(()=>{this.refresh()}));const i=e.element.container;i.addEventListener("click",(s=>{let n=s.target;if(!n||!n.type)return;"reset"==n.type&&n.closest("form").reset(),"radio"===n.type?n.value?this.value=n.value:this.selectedIndex=Number(n.dataset.index):this.multiple&&(this.value=[...i.querySelectorAll('[type="checkbox"]:checked')].map((t=>t.value)).join());let r=[];[...this.options].forEach((t=>{t.selected&&r.push(t.innerHTML)}));let o=document.createTextNode(r.join()||t.originText||"");[...t.childNodes].some((t=>t.nodeType===Node.TEXT_NODE&&(t.parentNode.replaceChild(o,t),!0)))||t.prepend(o),"checkbox"!=n.type&&e.remove()})),t.matches('ui-select[is="ui-select"]')&&(this.resizeObserver=new ResizeObserver((()=>{this.resize()})),this.resizeObserver.observe(this),this.intersectionObserver=new IntersectionObserver((()=>{this.resize()})),this.intersectionObserver.observe(this)),t.originText=t.textContent}}resize(){let t=this.element.trigger;if(!t)return;let e=this.getBoundingClientRect();t.style.width=e.width+"px",t.style.height=e.height+"px";let i=t.getBoundingClientRect(),s=getComputedStyle(t),n=s.getPropertyValue("--ui-offset-x")||0,r=s.getPropertyValue("--ui-offset-y")||0,o=e.left-i.left,a=e.top-i.top;t.style.setProperty("--ui-offset-x",Number(n)+o),t.style.setProperty("--ui-offset-y",Number(r)+a)}setProperty(){Object.defineProperty(this,"value",{configurable:!0,enumerable:!0,writeable:!0,get:()=>{let t=[];return[].slice.call(this.options).forEach((e=>{e.selected&&t.push(e.value)})),t.join()},set:t=>{let e=!1;t=this.multiple?t.split(","):[t.toString()],[].slice.call(this.options).forEach((i=>{!this.multiple&&e||(-1!==t.indexOf(i.value)?i.selected=e=!0:this.multiple&&(i.selected=!1))})),this.dispatchEvent(new CustomEvent("change"))}});const t=Object.getOwnPropertyDescriptor(HTMLSelectElement.prototype,"selectedIndex");Object.defineProperty(HTMLSelectElement.prototype,"selectedIndex",{...t,set(t){this.options[t]&&(this.options[t].selected=!0)}})}renderAttribute(t,e){"string"==typeof this[t]?this.style.setProperty("--ui-select-"+t,this[t]):e||this.style.removeProperty("--ui-select-"+t)}render(){I.observedAttributes.forEach((t=>{this.renderAttribute(t,!0)}))}attributeChangedCallback(t){this.render(t)}connectedCallback(){this.popup&&(this.create(),this.events()),this.render(),this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-select"}})),this.isConnectedCallback=!0}disconnectedCallback(){this.element.trigger&&this.element.trigger.remove(),this.element.popup&&this.element.popup.remove(),this.resizeObserver&&this.resizeObserver.disconnect()}}customElements.get("ui-select")||customElements.define("ui-select",I,{extends:"select"});const O=new u;class j extends HTMLTextAreaElement{static get observedAttributes(){return["rows","height","width","label","font","minLength","maxLength"]}get label(){return this.getAttribute("label")}set label(t){this.setAttribute("label",t),this.setAttribute("aria-label",t),this.placeholder||(this.placeholder=t)}get height(){let t=this.getAttribute("height");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set height(t){this.setAttribute("height",t)}get width(){let t=this.getAttribute("width");return isNaN(t)||isNaN(parseFloat(t))||(t+="px"),t}set width(t){this.setAttribute("width",t)}count(){O.count.call(this)}setLabel(){O.setLabel.call(this)}attributeChangedCallback(t){this.renderAttribute(t)}renderAttribute(t,e){O.renderAttribute.call(this,t,e)}render(){j.observedAttributes.forEach((t=>{this.renderAttribute(t,!0)}))}constructor(){super(),this.render(),this.addEventListener("focus",(function(){this.label&&setTimeout((()=>{this.setLabel()}),16)})),this.addEventListener("blur",(function(){this.label&&setTimeout((()=>{this.setLabel()}),16)})),this.addEventListener("input",(()=>{this.count()})),"auto"==this.height&&this.addEventListener("input",(function(){let t=parseFloat(getComputedStyle(this).borderTopWidth)+parseFloat(getComputedStyle(this).borderBottomWidth);t||(t=0),this.height="auto",this.scrollHeight+t>this.offsetHeight&&(this.height=this.scrollHeight+t)}))}connectedCallback(){this.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-textarea"}})),this.isConnectedCallback=!0}}customElements.get("ui-textarea")||customElements.define("ui-textarea",j,{extends:"textarea"});class $ extends d{setParams(t,e,i){var s,n;t&&([e,i].forEach((function(t){"number"==typeof t?n=t:"string"==typeof t?s=t:"object"==typeof t&&(s=t.type,n=t.time)})),"number"==typeof n&&(this.time=n),s&&(this.type=s),this.innerHTML=t)}static success(t,e=3e3){return this.custom(t,"success",e)}static error(t,e=3e3){return this.custom(t,"error",e)}static warning(t,e=3e3){return this.custom(t,"warning",e)}static custom(t,e,i){return $.toast?($.toast.setParams(t,e,i),$.toast.show()):$.toast=new window.Toast(t,e,i),$.toast}}window.Toast=function(){const t=document.createElement("ui-toast");return t.setParams(...arguments),document.body.append(t),t.open=!0,t},customElements.get("ui-toast")||customElements.define("ui-toast",$);const q=(()=>{window.DBC2SBC=t=>{let e,i,s="";for(e=0;e<t.length;e++)i=t.charCodeAt(e),s+=i>=65281&&i<=65373?String.fromCharCode(t.charCodeAt(e)-65248):12288==i?String.fromCharCode(t.charCodeAt(e)-12288+32):t.charAt(e);return s},window.scrollTopTo=(t,e)=>{let i=document.scrollingElement.scrollTop;const s=()=>{if(i+=(t-i)/2,Math.abs(i-t)<=1)return document.scrollingElement.scrollTop=t,void(e&&e());document.scrollingElement.scrollTop=i,requestAnimationFrame(s)};s()},document.validate={reg:{email:"^[a-z0-9._%-]+@([a-z0-9-]+\\.)+[a-z]{2,4}$",number:"^\\-?\\d+(\\.\\d+)?$",url:"^(http|https)\\:\\/\\/[a-z0-9\\-\\.]+\\.[a-z]{2,3}(:[a-z0-9]*)?\\/?([a-z0-9\\-\\._\\:\\?\\,\\'\\/\\\\\\+&amp;%\\$#\\=~])*$",tel:"^1\\d{10}$",zipcode:"^\\d{6}$",date:"^\\d{4}\\-(0\\d|1[0-2])\\-([0-2]\\d|3[0-1])$",time:"^[0-2]\\d\\:[0-5]\\d$",hour:"^[0-2]\\d\\:00$",minute:"^[0-2]\\d\\:[0-5]\\d$"},name:{email:"邮箱",tel:"手机号码",url:"网址",zipcode:"邮编",password:"密码",number:"数值",range:"数值",date:"日期",year:"年份",month:"月份",hour:"小时",minute:"分钟",time:"时间",datetime:"日期时间"},selectRange(t,e,i){if(t)if(t.createTextRange){const s=t.createTextRange();s.collapse(!0),s.moveEnd("character",i),s.moveStart("character",e),s.select()}else t.focus&&(t.focus(),t.setSelectionRange(e,i))},getTel(t){let e=t||"";return e=e.replace("+86",""),e.match(/\d/)&&11==e.match(/\d/g).length&&(e=e.replace(/\D/g,"")),e},getLength:(t,e)=>"password"==t.type&&e||t.value.length,getType(t){let e=t.getAttribute("type")||t.type||"";return"select-one"==e&&(e="select"),e},getReportText(t){const e={name:this.name,badInput:"值无效",customError:"包含错误",patternMismatch:{pattern:"内容格式不符合要求",multiple:"某项内容格式不符合要求"},valueMissing:{radio:"请选择一个选项",checkbox:"如果要继续，请选中此框",select:"请选择列表中的一项","select-one":"请选择列表中的一项",empty:"请填写此字段"},rangeOverflow:"值偏大",rangeUnderflow:"值偏小",stepMismatch:"值不在间隔要求范围内",tooLong:"内容长度偏大",tooShort:"内容长度偏小",typeMismatch:"值和输入框类型不匹配"};if(!t)return"";const i=t.validity;if(1==i.valid)return"";let s="";const n=t.id,r=this.getType(t),o=t.customValidate||{},a=o.report||{},l=e.name[r]||function(){if(!o.label||!n||/checkbox|radio/.test(r))return;let t="";return document.querySelectorAll('label[for="'+n+'"]').forEach((function(e){const i=e.cloneNode(!0);[].slice.call(i.children).forEach((function(t){t.remove()}));const s=i.innerHTML.trim().replace(/\d/g,"").replace("：","");s.length>t.length&&(t=s)})),t.length>=2?t:void 0}();if(i.valueMissing)s=a.valueMissing,s||(s=r&&l?"select"!=r?l+"不能为空":"您尚未选择"+l:e.valueMissing[r],s=s||e.valueMissing.empty);else if(i.patternMismatch){if(s=a.patternMismatch,!s){const i=t.hasAttribute("multiple")&&t.value.split(",").length>1;s=e.patternMismatch[i?"multiple":"pattern"],r&&l&&(s=l+s)}}else if(i.badInput)s=a.badInput,s||(s=(l||"")+e.badInput);else if(i.typeMismatch)s=a.typeMismatch,s||(s=e.typeMismatch,l&&(s=s.replace("输入框",l)));else if(i.rangeUnderflow||i.rangeOverflow){if(s=a.rangeUnderflow||a.rangeOverflow,!s&&r&&l){let e=t.getAttribute("min"),n=t.getAttribute("max");"month-range"==r&&(e=e.slice(0,7),n=n.slice(0,7));const o="必须要大于或等于"+e,a="必须要小于或等于"+n;i.rangeUnderflow&&i.rangeOverflow?s="起始日期"+o+"，结束日期"+a:i.rangeUnderflow?(s=l+o,"-range"==r.slice(-6)&&(s="起始日期"+o)):(s=l+a,"-range"==r.slice(-6)&&(s="结束日期"+a))}s=s||"值不在要求的范围内"}else if(i.stepMismatch){if(s=a.stepMismatch,!s){const e=1*t.getAttribute("min"),i=1*t.getAttribute("max"),n=1*t.getAttribute("step")||1;s="number"==r||"range"==r?"请输入有效的值。两个最接近的有效值是"+function(){const s=1*t.value.trim();let r=e;for(let t=e;t<i;t+=n)if(t<s&&t+n>s){r=t;break}return[r,r+n].join("和")}():"请"+(t.hasAttribute("readonly")?"选择":"输入")+"有效的值。"+(l||"")+"间隔是"+n}s=s||e.stepMismatch}else if(i.tooLong||i.tooShort){const e=t.getAttribute("lang");let n="";/zh/i.test(e)?n="个汉字(2字母=1汉字)":/en/i.test(e)&&(n="个字符(1汉字=2字符)"),i.tooLong?(s=a.tooLong,s||(s=(l||"")+"内容长度不能大于"+(t.maxlength||t.getAttribute("maxlength")).replace(/\D/g,"")+n)):(s=a.tooShort,s||(s="内容长度不能小于"+t.getAttribute("minlength")+n))}else i.customError&&(s=a.customError||e.customError);return"function"==typeof s&&(s=s.call(t,t)),s},getMissingState(t){const e={valueMissing:!1};if(!t||t.disabled)return e;const i=this.getType(t);let s=t.value;if(t.hasAttribute("required")){if("radio"==i){let i=[t];const s=t.closest("form")||t.parentElement.parentElement;return t.name&&s&&(i=s.querySelectorAll('input[type="radio"][name="'+t.name+'"]')),0==[].slice.call(i).some((function(t){return t.checked}))&&(e.valueMissing=!0),e}if("checkbox"==i)return 0==t.checked&&(e.valueMissing=!0),e;"password"!=i&&(s=s.trim()),""==s&&(t.value="",e.valueMissing=!0)}return e},isMissing(t){return this.getMissingState(t).valueMissing},getMismatchState(t,e,i){const s={patternMismatch:!1,typeMismatch:!1};if(!t||t.disabled)return!1;const n=t.value;let r=n;const o=this.getType(t);if(/^radio|checkbox|select$/i.test(o))return s;if("password"!=o&&(r=n.trim()),0==/^text|textarea|password$/i.test(o)&&(r=window.DBC2SBC(r)),"tel"==o&&(r=this.getTel(r)),!1!==document.validate.focusable&&0!==document.validate.focusable&&r!=n&&(t.value=r),""==r)return s;if(!(e=e||t.getAttribute("pattern")||o&&o.split("|").map((function(t){const e=document.validate.reg[t];if(e)return e})).join("|")))return s;const a=t.hasAttribute("multiple"),l=new RegExp(e,i||"i");let h=!0;return a&&0==/^number|range$/i.test(o)?r.split(",").forEach((function(t){t=t.trim(),h&&!l.test(t)&&(h=!1)})):h=l.test(r),0==h&&(t.hasAttribute("pattern")?s.patternMismatch=!0:s.typeMismatch=!0),s},isMismatch(t,e,i){const s=this.getMismatchState(t,e,i);return s.patternMismatch||s.typeMismatch},getRangeState(t){const e={badInput:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1};if(!t||t.disabled)return e;const i=this.getType(t);let s=t.value.trim();if(/radio|checkbox|select|textarea/i.test(i)||""==s)return e;let n=t.getAttribute("min"),r=t.getAttribute("max");const o=Number(t.getAttribute("step"))||1;if("number"!=i&&"range"!=i||/[-+]?[0-9]/.test(s)||(e.badInput=!0),"-range"!=i.slice(-6)){if("0"!=s&&Number(s)!=s||(s*=1),n&&s<n&&(e.rangeUnderflow=!0),r&&s>r&&(e.rangeOverflow=!0),"number"!=i&&"range"!=i||!o||!n||/^\d+$/.test(Math.abs(s-n)/o)||(e.stepMismatch=!0),("hour"==i||"minute"==i||"time"==i)&&n&&o){const t=s.split(":")[1],r=n.split(":")[1];"hour"!=i||t==r&&(s.split(":")[0]-n.split(":")[0])%o==0?(t-r)%o!=0&&(e.stepMismatch=!0):e.stepMismatch=!0}}else{const t=s.split(" ");"month-range"==i&&(n=n&&n.slice(0,7),r=r&&r.slice(0,7)),3==t.length&&(n&&t[0]<n&&(e.rangeUnderflow=!0),r&&t[2]>r&&(e.rangeOverflow=!0))}return e},isOut(t){const e=this.getRangeState(t);return e.badInput||e.rangeOverflow||e.rangeUnderflow||e.stepMismatch},getLengthState(t){const e={tooLong:!1,tooShort:!1};if(!t||t.disabled||/^radio|checkbox|select$/i.test(t.type))return e;const i=t.getAttribute("minlength");let s=t.maxlength||t.getAttribute("maxlength");if(""==t.value)return e;const n=this.getLength(t);return i&&n<i&&(e.tooShort=!0),s&&(s=s.replace(/\D/g,""),n>s&&(e.tooLong=!0)),e},isOverflow(t){const e=this.getLengthState(t);return e.tooLong||e.tooShort},getCustomState(t){const e={customError:!1},i=t.customValidate;if(i&&"function"==typeof i.method){const s=i.method.call(i.owner,t);s&&(e.customError=!0,"object"==typeof s&&s.customError?this.setCustomValidity(t,s.customError):this.setCustomValidity(t,s))}return e},setCustomValidity(t,e){e&&(t.customValidate||(t.customValidate={report:{}}),t.customValidate.report||(t.customValidate.report={}),t.customValidate.report.customError=e)},checkValidity(t){if(!t||t.disabled)return!0;const e=t.getAttribute("type")||t.type,i=t.tagName.toLowerCase();return 1==/^button|submit|reset|file|image$/.test(e)||"button"==i||(0==t.matches("input, select, textarea")&&t.children&&(t=t.querySelectorAll("input, select, textarea")),1==t.nodeType?this.getValidity(t).valid:!t.length||[].slice.call(t).every(function(t){return this.checkValidity(t)}.bind(this)))},getValidity(t){if(t.lastValidateState&&t.lastValue===t.value&&0==/radio|checkbox/.test(t.type))return t.lastValidateState;let e={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!0,valueMissing:!1};e=Object.assign({},e,this.getMissingState(t),this.getMismatchState(t),this.getRangeState(t),this.getLengthState(t),this.getCustomState(t));let i=!1;for(let t in e)"valid"!=t&&1==e[t]&&(i=!0);return e.valid=!i,t.lastValue=t.value,t.lastValidateState=e,setTimeout((function(){delete t.lastValidateState}),1),e},reportValidity(t,e){e=e||this.getReportText(t),this.errorTip(t,e),""===e&&t.data&&t.data.errorTip&&t.data.errorTip.hide();const i=!e;return this.styleError(t,i),i},styleError(t,e){if(!t)return this;void 0===e?e=t.validity.valid:t.dispatchEvent(new CustomEvent(e?"valid":"invalid"));const i=this.getTarget(t);if(!i)return e;const s=t.form||t.closest("form")||t.customValidate&&t.customValidate.owner;return"radio"==t.type&&t.name&&s?s.querySelectorAll("input[type=radio][name="+t.name+"]").forEach(function(t){const i=this.getTarget(t);e?(i.removeAttribute("is-error"),i.removeAttribute("aria-label")):i.setAttribute("is-error","")}.bind(this)):e?(i.removeAttribute("is-error"),i.removeAttribute("aria-label")):i.setAttribute("is-error",""),e},errorTip(t,e){const i=this.getTarget(t);if(!i||!e)return this;const s=window.getComputedStyle(i);if("none"==s.display||"hidden"==s.visibility)return this;const n=function(){const i=document.validate.errorTip.control,s=document.validate.errorTip.target;if(s.errorTip(e,{onShow(t,e){const i=.5*(e.clientWidth-s.clientWidth);e.style.marginLeft=i<0?.5*(e.clientWidth-s.clientWidth)+"px":0,!1===document.validate.focusable?e.classList.add("none"):e.classList.remove("none")},onHide(t,e){const s=i.form||i.closest("form");s&&s.isImmediated&&(e.style.marginLeft="",document.validate.styleError(i))}}),!1!==document.validate.focusable&&0!==document.validate.focusable&&(document.validate.focusable=null,document.validate.getType(i)))if(-1!=e.indexOf("内容长度")&&-1!=e.indexOf("大")){const e=i.value.length,s=i.maxlength||i.getAttribute("maxlength").replace(/\D/g,"");e&&s&&document.validate.selectRange(t,document.validate.getLength(t,s),e)}else i.focus&&i.select&&(i.focus(),i.select())};document.validate.errorTip.control=t,document.validate.errorTip.target=i;const r=i.getBoundingClientRect();let o=-1;return r.top<50?o=window.pageYOffset-(50-r.top):r.bottom>window.innerHeight&&(o=window.pageYOffset+(r.bottom-window.innerHeight)),o>=0?window.scrollTopTo(o,n):n(),this},getTarget(t){if(!t)return null;let e=t;const i=t.getAttribute("type")||t.type,s=t.id,n=t.tagName.toLowerCase(),r=window.getComputedStyle(t);if("radio"==i)"1"!=r.opacity&&(e=t.parentElement.querySelector('label.ui-radio[for="'+s+'"]'));else if("checkbox"==i)"1"!=r.opacity&&(e=t.parentElement.querySelector('label.ui-checkbox[for="'+s+'"]'));else if("select"==i||"select"==n)"1"!=r.opacity&&(e=t.nextElementSibling);else if("range"==i)"none"==r.display&&(e=t.nextElementSibling);else if("hidden"==i||"none"==r.display||"hidden"==r.visibility){const i=document.getElementById(e.getAttribute("data-target"))||t.dataTarget;i&&(e=document.validate.getTarget(i))}else"textarea"==i||"textarea"==n?0==t.classList.contains("ui-textarea")&&t.parentElement.querySelector(".ui-textarea")&&(e=t.parentElement.querySelector(".ui-textarea")):"input"==n&&0==t.classList.contains("ui-input")&&t.parentElement.querySelector(".ui-input")&&(e=t.parentElement.querySelector(".ui-input"));return e}},[HTMLInputElement.prototype,HTMLSelectElement.prototype,HTMLTextAreaElement.prototype].forEach((function(t){Object.defineProperty(t,"validity",{get(){return document.validate.getValidity(this)},configurable:!0}),Object.defineProperty(t,"validationMessage",{get(){return document.validate.getReportText(this)},configurable:!0}),Object.defineProperty(t,"checkValidity",{value(){return this.validity.valid},configurable:!0}),Object.defineProperty(t,"reportValidity",{value(t){return document.validate.reportValidity(this,t)},configurable:!0}),Object.defineProperty(t,"setCustomValidity",{value(t){if(!t)return;const e=["badInput","customError","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valueMissing"];this.customValidate||(this.customValidate={}),this.customValidate.report||(this.customValidate.report={}),"string"==typeof t?e.forEach((function(e){this.customValidate.report[e]=t})):"object"==typeof t&&Object.assign(this.customValidate.report,t)},configurable:!0})})),Object.defineProperty(HTMLFormElement.prototype,"checkValidity",{value(){return document.validate.checkValidity(this)},configurable:!0});return class{constructor(t,e,i){if("string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t)return this;const s=t;if(s.data&&s.data.validate)return s.data.validate;s.setAttribute("novalidate","novalidate");"object"==typeof e&&(i=e,e=null);const n=Object.assign({},{multiple:!0,immediate:!0,label:!0,validate:[]},i||{});return s.querySelectorAll('[type="submit"]:disabled, [type="image"]:disabled').forEach((function(t){t.disabled=!1})),s.addEventListener("submit",(t=>{if(!this.stopValidate)return t.preventDefault(),this.checkValidity()&&("function"==typeof e&&e.call(this,s),s.dispatchEvent(new CustomEvent("valid"))),!1})),this.element={form:s},this.params={multiple:n.multiple,immediate:n.immediate,label:n.label},this.setCustomValidity(n.validate),this.count(),this.enhance(),s.data||(s.data={}),s.data.validate=this,this}setCustomValidity(t){let e=t||this.dataValidate;if(!e||!this.element||!this.element.form)return this;"function"==typeof e&&(e=e()),e&&!e.forEach&&e.id&&(e=[e]);const i=this.params.label;let s=this.element.form.elements||this.element.form.querySelectorAll("input, textarea, select");if(!s.length)return this;[...s].forEach((t=>{const s=t.id;let n={label:i,owner:this};s&&e&&e.length&&e.forEach(function(t){t.id==s&&(t.label=i,t.owner=this,n=t)}.bind(this)),this.element.form.data&&this.element.form.data.validate||(t.lastValue=t.value||""),t.customValidate=n})),this.dataValidate=t}count(){return this.element.form.addEventListener("reset",(function(){this.querySelectorAll("input, textarea").forEach((function(t){t.count&&setTimeout((()=>{t.count()}),1)}))})),this}enhance(){this.element.form.querySelectorAll("input, textarea").forEach((function(t){const e=document.validate.getType(t);0==/^checkbox|radio|range$/i.test(e)&&["paste","drop"].forEach((e=>{t.addEventListener(e,(function(e){const i=this.getAttribute("type")||this.type,s=e.clipboardData||e.dataTransfer;let n="";if(!s)return;let r=this.value.slice(t.selectionStart,t.selectionEnd);""!=this.value.trim()&&r!==this.value||(e.preventDefault(),e.stopPropagation(),n=s.getData("text")||"","password"!=i&&(n=n.trim()),"email"==i?n=n.replace("#","@"):"tel"==i&&(n=document.validate.getTel(n)),this.value=n,t.dispatchEvent(new CustomEvent("input")))}))}))}))}immediate(){const t=this.element.form;if(t.isImmediated)return this;const e=t=>{0!=this.params.immediate&&this.reportValidity(t.target)},i=t=>{this.params.immediate&&setTimeout(function(){document.validate.focusable=0,this.reportValidity(t.target)}.bind(this),20)},s=t=>{0!=this.params.immediate&&(document.validate.focusable=!1,this.reportValidity(t.target),t.target.lastValue=t.target.value)};t.querySelectorAll("input, select, textarea").forEach((function(t){let n=t.type,r=t.getAttribute("type");"button"!=n&&"submit"!=n&&"reset"!=n&&"file"!=n&&"image"!=n&&("radio"==n||"checkbox"==n?t.addEventListener("click",e):/select/.test(n)||/range|date|time|hour|minute|hidden/.test(r)?t.addEventListener("change",e):(t.addEventListener("focus",i),t.addEventListener("input",s)))})),t.isImmediated=!0;const n=function(){[...t.elements].forEach((t=>{let n=t.type;if(["button","submit","reset","file","image"].includes(n))return;let r=t.getAttribute("type");"radio"==n||"checkbox"==n?t.removeEventListener("click",e):/select/.test(n)||/range|date|time|hour|minute|hidden/.test(r)?t.removeEventListener("change",e):(t.removeEventListener("focus",i),t.removeEventListener("input",s))})),[...t.querySelectorAll(".valided")].forEach((t=>{t.classList.remove("valided")})),[...t.querySelectorAll("[is-error]")].forEach((t=>{let e=t.data&&t.data.errorTip;e&&e.hide(),t.removeAttribute("is-error")})),t.isImmediated=!1,t.removeEventListener("reset",n)};return t.addEventListener("reset",n),this}checkValidity(){const t=this.element.form;let e=!0;return document.validate.focusable=!0,t.querySelectorAll("input, select, textarea").forEach((t=>{if(1==e||this.params.multiple){const i=t.validity.valid;1==e&&0==i?(this.reportValidity(t),e=!1):document.validate.styleError(t,i)}})),!t.isImmediated&&this.params.immediate&&this.immediate(),e}reportValidity(t,e){t&&document.validate.reportValidity(t,e)}}})();window.Validate=q,HTMLFormElement.prototype.validate=function(){return new q(this),this},function(){const t=t=>{(t||document.querySelectorAll("[is-validate]")).forEach((t=>{t.validate(),t.dispatchEvent(new CustomEvent("connected",{detail:{type:"ui-validate"}})),t.dispatchEvent(new CustomEvent("DOMContentLoaded"))}))},e=()=>{t();new MutationObserver((e=>{e.forEach((e=>{e.addedNodes&&e.addedNodes.forEach((e=>{e.tagName&&(e.hasAttribute("is-validate")?t([e]):t(e.querySelectorAll("[is-validate]")))}))}))})).observe(document.body,{childList:!0,subtree:!0})};"loading"!=document.readyState?e():window.addEventListener("DOMContentLoaded",e)}()})();